<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><head>







  
  <meta content="text/html; charset=UTF-8" http-equiv="content-type"><title>The Architecture of the UnQLite Database Engine</title><!-- Copyright (C) 2013 Mrad Chems Eddine, Symisc Systems,http://www.symisc.net contact@symisc.net -->
  

  

  
  <link rel="stylesheet" href="symisc.css" type="text/css">

  
  <meta content="Symisc Systems &lt;chm@symisc.net&gt; - Mrad Chems Eddine" name="author">

  
  <meta content="http://unqlite.org/" name="description"></head><body>
<div style="width: 1092px;" id="main_div"><a href="http://unqlite.org/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc UnQLite" title="Symisc UnQLite" src="images/symisc-unqlite.png"></a><br>
<div style="text-align: left; width: 1080px;" align="right">
<table style="text-align: left; width: 1075px; height: 41px;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; width: 709px; height: 45px;"><small style="color: black; font-family: Verdana;"><small><br>
An Embeddable NoSQL Database Engine<br>
      </small></small></td>
      <td style="vertical-align: top; width: 162px; height: 45px;"><br>
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="unqlite_db" data-size="large">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
      <td style="vertical-align: top; width: 176px; height: 45px;"><br>
      <a href="https://twitter.com/unqlite_db" class="twitter-follow-button" data-show-count="false" data-size="large">Follow
@unqlite_db</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
    </tr>
  </tbody>
</table>
</div>
<hr style="width: 100%; height: 2px;">
<ul id="nav">
  <li id="nav-1"><a href="index.html">About</a></li>
  <li id="nav-8"><a href="features.html">Distinctive Features<br>
    </a></li>
  <li id="nav-2"><a href="intro.html">Getting Started<br>
    </a></li>
  <li id="nav-3"><a href="c_api.html">Documentation<br>
    </a></li>
  <li id="nav-4"><a href="downloads.html">Downloads<br>
    </a></li>
  <li id="nav-5"><a href="licensing.html">License<br>
    </a></li>
  <li id="nav-6"><a href="faq.html">FAQ<br>
    </a></li>
  <li id="nav-7"><a href="support.html">Online Support<br>
    </a></li>
</ul>
<h1 style="font-family: Verdana;"><font style="font-size: 10pt;" size="2">The Architecture of the UnQLite Database Engine.</font></h1>
<div>
<div style="text-align: center;"><a href="api_intro.html"><img src="images/unqlite_arch.png" title="UnQLite Architecture Diagram" alt="UnQLite Architecture Diagram" style="border: 0px solid ; width: 794px; height: 1123px;"></a><br>
<div style="text-align: left;">
<hr style="width: 100%; height: 2px;"><br>
</div>
</div>

<h1 style="font-family: Verdana;"><font><font style="font-size: 10pt;" size="2">Introduction</font></font></h1>

<p style="font-weight: normal;"><font face="Verdana, sans-serif"><font size="2">This
document describes the architecture of the UnQLite database engine.
The information here is useful to those who want to understand or
modify the inner workings of UnQLite. </font></font>
</p>

<p><font face="Verdana, sans-serif"><font size="2">A block diagram
showing the main components of UnQLite and how they interrelate is
shown above. The text that follows will provide a quick overview of
each of these components.</font></font></p>
<p><font face="Verdana, sans-serif"><font size="2"><br>
</font></font></p>

<p><font face="Verdana, sans-serif"><font size="2">Like most modern
database engines, UnQLite is built-up on layers, The upper-layers
hence the document-store and the Key/Value store layers are presented
to the host application via a set of exported interfaces (i.e. The
UnQLite <a href="c_api_func.html">API</a>).</font></font></p>
<p><br>
</p>
<p>
</p>


<p style="font-weight: normal;"><font face="Verdana, sans-serif"><font size="2">The
principal task of a database engine is to store and retrieve records.
UnQLite support both structured and raw database record
storage. <font face="Verdana, sans-serif">The
Document-store layer is used to store JSON docs (i.e. Objects,
Arrays, Strings, etc.) in the database and is powered by the <a href="jx9.html">Jx9</a>
programming language while the Key/Value store layer is used to store
raw records in the database.</font> </font></font>
</p>



<h1 style="font-family: Verdana;"><small><small><b>Key/Value store layer</b></small></small><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">.</font></font></h1>
<p style="margin-bottom: 0cm;"><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">UnQLite
is a standard key/value store similar to BerkeleyDB, Tokyo Cabinet,
LevelDB, etc. but, with a rich feature set including support for
transactions (ACID), concurrent reader, etc. </span></span></span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">Under
the KV store, </span></span></span></font></font></font><font face="Verdana, sans-serif"><font size="2">both
keys and values are treated as simple arrays of bytes, so content can
be anything from ASCII strings, binary blob and even disk files. The KV
store layer is presented to host applications via a set of 
interfaces, these includes: <a style="font-family: Courier New;" href="c_api/unqlite_kv_store.html">unqlite_kv_store()</a>, <a style="font-family: Courier New;" href="c_api/unqlite_kv_append.html">unqlite_kv_append()</a>,
<a style="font-family: Courier New;" href="c_api/unqlite_kv_fetch_callback.html">unqlite_kv_fetch_callback()</a>, <a style="font-family: Courier New;" href="c_api/unqlite_kv_append.html">unqlite_kv_append_fmt()</a>, <a style="font-family: Courier New;" href="c_api/unqlite_kv_delete.html">unqlite_kv_delete()</a>, etc.</font></font></p>

<h1 style="font-family: Verdana;"><small><small><b>Document store layer</b></small></small><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">.</font></font></h1>

<p><font color="#000000"><span style="text-decoration: none;"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">The
      <a href="api_intro.html#doc_store">Document store</a> to UnQLite which is used to store JSON docs (i.e.
Objects, Arrays, Strings, etc.) in the database is powered by the Jx9
programming language.</span></span></span></font></font></span></font></p>

      
<p><font color="#000000"><span style="text-decoration: none;"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;"><br>
      </span></span></span></font></font></span></font></p>


      
<p style="font-style: normal; font-weight: normal; text-decoration: none;" lang="en-US">
<font color="#000000"><font face="Verdana, sans-serif"><font size="2"><a href="jx9.html">Jx9</a>
is an embeddable scripting language also called extension language
designed to support general procedural programming with data
description facilities. Jx9 is a Turing-Complete, dynamically typed
programming language based on JSON and implemented as a library in
the UnQLite core.</font></font></font></p>


      
<p style="font-style: normal; font-weight: normal; text-decoration: none;" lang="en-US">
<font color="#000000"><font face="Verdana, sans-serif"><font size="2"><br>
</font></font></font></p>


      
<p style="font-style: normal; font-weight: normal; text-decoration: none;" lang="en-US"><font color="#000000"><font face="Verdana, sans-serif"><font size="2">Jx9
is built with a <a href="features.html#jx9_features">tons of features</a> and has a clean and familiar syntax
similar to C and Javascript. Being
an extension language, Jx9 has no notion of a <i>main</i> program, it
only works <em>embedded</em> in a host <em><span style="font-style: normal;">application</span></em>.
The host program (UnQLite in our case) can write and read Jx9
      <a href="c_api/unqlite_vm_extract_variable.html">variables</a> and can register <a href="c_api/unqlite_create_function.html">C/C++ functions</a> to be called by Jx9 code. </font></font></font>
      </p>
<h1 style="font-family: Verdana;"><small><small><b>Pluggable Run-time Interchangeable Storage Engines</b></small></small><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">.</font></font></h1>

<font face="Verdana, sans-serif"><font size="2">UnQLite works with
run-time interchangeable storage engines (i.e. Hash, B+Tree, R+Tree,
LSM, etc.). The storage engine works with key/value pairs where both
the key and the value are byte arrays of arbitrary length and with no
restrictions on content. UnQLite come with two built-in KV
storage engine: A Virtual Linear Hash (VLH) storage engine is used
for persistent on-disk databases with O(1) lookup time and an
in-memory hash-table or Red-black tree storage engine is used for
in-memory databases. Future versions of UnQLite might add other
built-in storage engines (i.e. LSM). </font></font>
<h1 style="font-family: Verdana;"><small><small><b>Transaction Manger/Pager module</b></small></small><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">.</font></font></h1>


<p style="font-weight: normal;"><font face="Verdana, sans-serif"><font size="2">The
underlying <a href="c_api_object.html#unqlite_kv_engine">storage engine</a> requests information from the disk in
fixed-size chunks. The default chunk size is 4096 bytes but can vary
between 512 and 65536 bytes. The pager module is responsible for
reading, writing, and caching these chunks. The pager module also
provides the rollback and atomic commit abstraction and takes care of
locking of the database file. The storage engine requests particular
pages from the page cache and notifies the pager module when it wants
to modify pages or commit or rollback changes. The pager module
handles all the messy details of making sure the requests are handled
quickly, safely, and efficiently.</font></font></p>

<h1 style="font-family: Verdana;"><small><small><b>Virtual File System</b></small></small><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">.</font></font></h1>

<p style="margin-bottom: 0cm; font-weight: normal;"><font face="Verdana, sans-serif"><font size="2">UnQLite
is designed to run on multitude of platforms. In order to provide
portability between these platforms (i.e.  Between POSIX and Win32/64
operating systems), UnQLite uses an abstraction layer to interface
with the operating system. Each supported operating system has its
own implementation.</font></font></p>

<p style="margin-bottom: 0cm; font-weight: normal;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><font face="Verdana, sans-serif">An
instance of the </font></font><font color="#000000"><font face="Verdana, sans-serif"><a style="font-family: Courier New;" href="c_api_object.html#unqlite_vfs">unqlite_vfs</a>
object defines the interface between the UnQLite core and the
underlying operating system. The "vfs" in the name of the
object stands for "Virtual File System".</font></font>  </font></font>
</p>


<h1 style="font-family: Verdana;"><small><small><b>useful links to start with</b></small></small><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">.</font></font></h1>

<p style="margin-bottom: 0cm;" align="left"><font face="Verdana, sans-serif"><font size="2">UnQLite
	is very easy to learn, even for new programmer. Here is some useful
	links to start with:</font></font></p>
<p style="margin-bottom: 0cm;" align="left"><font face="Verdana, sans-serif"><font size="2"><br>
</font></font></p>

	
<p align="left"><a href="intro.html"><font face="Verdana, sans-serif"><font size="2">UnQLite
	In 5 Minutes Or Less</font></font></a> <font face="Verdana, sans-serif"><font size="2">gives
	a high-level overview on the how to embed UnQLite in a host
	application.</font></font><br><a href="api_intro.html"><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: normal;">An
	Introduction To The UnQLite C/C++ Interface</span></font></font></a>
	<font face="Verdana, sans-serif"><font size="2"><span style="font-weight: normal;">gives
	an overview and roadmap to the dozens of C/C++ interface to UnQLite.</span></font></font></p>

	
<p align="left"><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: normal;"><a href="jx9.html">An
	Introduction To Jx9</a> - Jx9 is the scripting l</span></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: normal;">anguage
	which power the <a href="api_intro.html#doc_store">document
	store</a> interface to UnQLite.</span></font></font></font> 
	</p>

	
<p align="left"><a href="file:///C:/Users/xtremejames183/Desktop/sources/symisc-src/UnQLite/website/arch.html"><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: normal;"></span></font></font></a><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: normal;"></span></font></font></font><br><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: normal;">Download
	some working examples from the <a href="downloads.html">download</a></span></font></font><a href="../../jx9/website/downloads.html">
	</a><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: normal;">page.</span></font></font></p>

<br>
</div>
<hr style="width: 100%; height: 2px;">
<div style="text-align: right; margin-top: 0px; height: 91px;"><small><small><a href="http://www.symisc.net/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc Systems" src="images/symisc.png"></a></small></small>
<div style="text-align: left; margin-top: 0px; height: 14px;"><small><small style="font-family: Verdana;">Copyright © <a href="http://www.symisc.net/">Symisc Systems</a></small></small><br>
</div>
</div>
</div>

</body></html>