<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><head>





  
  <meta content="text/html; charset=UTF-8" http-equiv="content-type"><title>UnQLite - Jx9 Samples</title><!-- Copyright (C) 2013 Mrad Chems Eddine, Symisc Systems,http://www.symisc.net contact@symisc.net -->
  

  

  
  <link rel="stylesheet" href="symisc.css" type="text/css">

  
  <meta content="Symisc Systems &lt;chm@symisc.net&gt; - Mrad Chems Eddine" name="author">

  
  <meta content="http://unqlite.org/" name="description"></head><body>
<div style="width: 1092px;" id="main_div"><a href="http://unqlite.org/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc UnQLite" title="Symisc UnQLite" src="images/symisc-unqlite.png"></a><br>
<div style="text-align: left; width: 1080px;" align="right">
<table style="text-align: left; width: 1075px; height: 41px;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; width: 709px; height: 45px;"><small style="color: black; font-family: Verdana;"><small><br>
An Embeddable NoSQL Database Engine<br>
      </small></small></td>
      <td style="vertical-align: top; width: 162px; height: 45px;"><br>
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="unqlite_db" data-size="large">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
      <td style="vertical-align: top; width: 176px; height: 45px;"><br>
      <a href="https://twitter.com/unqlite_db" class="twitter-follow-button" data-show-count="false" data-size="large">Follow
@unqlite_db</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
    </tr>
  </tbody>
</table>
</div>
<hr style="width: 100%; height: 2px;">
<ul id="nav">
  <li id="nav-1"><a href="index.html">About</a></li>
  <li id="nav-8"><a href="features.html">Distinctive Features<br>
    </a></li>
  <li id="nav-2"><a href="intro.html">Getting Started<br>
    </a></li>
  <li id="nav-3"><a href="c_api.html">Documentation<br>
    </a></li>
  <li id="nav-4"><a href="downloads.html">Downloads<br>
    </a></li>
  <li id="nav-5"><a href="licensing.html">License<br>
    </a></li>
  <li id="nav-6"><a href="faq.html">FAQ<br>
    </a></li>
  <li id="nav-7"><a href="support.html">Online Support<br>
    </a></li>
</ul>
<h1 style="font-family: Verdana;"><font style="font-size: 10pt;" size="2">Jx9 Samples</font><small><small><b>.</b></small></small></h1>
<div>
<div style="text-align: right;">
</div>
<p style="margin-bottom: 0cm; font-weight: normal; text-align: right;"><font face="Verdana, sans-serif"><font size="2"><img style="width: 170px; height: 70px;" alt="Symisc Jx9" title="Symisc Jx9" src="images/symisc-jx9.png"><br>
</font></font></p>
<p style="margin-bottom: 0cm; font-weight: normal;"><font face="Verdana, sans-serif"><font size="2">Hello
world from Jx9<br>
</font></font></p>

<br>
<div style="text-align: left; margin-left: 68px; width: 550px;" id="code"><small style="font-family: Courier New;"><span style="color: green;"></span></small><small><span style="color: blue; font-family: Courier New;"><br>
print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Hello World\n"</span><span style="font-family: Courier New;">;</span></small><br style="font-family: Courier New;">
<small>
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Host Operating System: "</span><span style="font-family: Courier New;">,JX9_OS,JX9_EOL;</span> </small><small style="font-family: Courier New;"><span style="color: green;">// Unix</span></small><br style="font-family: Courier New;">
<small>
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Current date: "</span><span style="font-family: Courier New;">, __DATE__,JX9_EOL;</span> </small><small style="font-family: Courier New;"><span style="color: green;">// 2013-05-14</span></small><br style="font-family: Courier New;">
<small>
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Current time: "</span><span style="font-family: Courier New;">, __TIME__;</span><span style="color: green; font-family: Courier New;"></span><span style="font-family: Courier New;">&nbsp; </span></small><small style="font-family: Courier New;"><span style="color: green;">// 12:43:52</span></small><small><br style="font-family: Verdana;">
<span style="font-family: Verdana;"></span></small><br>
</div>

<p style="margin-bottom: 0.5cm; font-weight: normal;" align="left"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></p>
<p style="margin-bottom: 0.5cm; font-weight: normal;" align="left"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">A more complex Hello world program.</font></font></p>

<div style="text-align: left; margin-left: 68px; width: 550px;" id="code"><small style="font-family: Courier New;"><span style="color: green;">// Declare a JSON object and assign it to the variable $my_data</span></small><br style="font-family: Courier New;">
<small style="font-family: Courier New;"> $my_data = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: green;"> // Greeting message </span><br>
&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-weight: bold;">greeting</span> : <span style="color: red;">"Hello world!\n"</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green;">// Host Operating System</span> <br>
&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-weight: bold;">os_name</span>: <a href="jx9_builtin.html">uname</a>(), </small><small style="font-family: Courier New;"><span style="color: green;">//Built-in OS function</span> </small><br style="font-family: Courier New;">
<small style="font-family: Courier New;">
&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green;">// Current date</span><br>
&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-weight: bold;">date</span> : __DATE__,<br>
&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green;">// Return the current time using an anonymous function</span><br>
&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-weight: bold;">time</span> : <span style="color: blue;">function</span>(){ <span style="color: blue;">return</span> __TIME__; }<br>
&nbsp;};<br>
<span style="color: green;">// invoke the object fields</span><br>
<span style="color: blue;">print</span> $my_data.greeting; </small><small style="font-family: Courier New;"><span style="color: green;">//Hello world!</span></small><br style="font-family: Courier New;">
<small>
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Host Operating System: "</span><span style="font-family: Courier New;">, $my_data.os_name, JX9_EOL;</span><br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Current date: "</span><span style="font-family: Courier New;">, $my_data.date, JX9_EOL;</span><br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Current time: "</span><span style="font-family: Courier New;">, $my_data.time(); </span><span style="color: green; font-family: Courier New;">// Anonymous function</span><span style="font-family: Courier New;"> </span><br style="font-family: Verdana;">
<span style="font-family: Verdana;"></span></small><br>
</div>

<p style="margin-bottom: 0cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></p>

<p style="margin-bottom: 0cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">That
is, this simple Jx9 script when running should display a greeting
message, the current system time and the host operating system. A
typical output of this program would look like this:</font></font></p>

<p style="margin-bottom: 0cm;"><br>
</p>


<div style="margin-left: 70px; width: 543px;" id="code"><font style="font-size: 10pt; font-family: Courier New;" size="2">
Hello world!<br>
Host Operating System:&nbsp; Microsoft Windows 7 localhost 6.1 build 7600 x86<br>
Current date: 2012-12-27<br>
Current time: 10:36:02</font><br>
</div>

<font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font>
<p style="margin-bottom: 0cm;" lang="en-US"><font face="Verdana, sans-serif"><font size="2">Another
Jx9 script which demonstrate how to use the <a href="jx9_builtin.html">built-in</a>
IO facility.</font></font></p>


<br>

<div style="text-align: left; margin-left: 68px; width: 550px;" id="code"><small><span style="color: green;"><span style="color: black;"><span style="color: green; font-family: Courier New;">//Declare an empty JSON array</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
$num = [];</span><br>
</span></span></small><small><span style="color: green;"><span style="color: black;"><span style="color: green; font-family: Courier New;"><br>
//Populate the JSON array</span></span></span></small><small><span style="color: green;"><span style="color: black;"><br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;"><br>
print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Enter a number (Decimal, Hex, Octal or Binary notation)\n"</span><span style="font-family: Courier New;">;</span><br style="font-family: Courier New;">
<span style="color: green; font-family: Courier New;"></span><span style="font-family: Courier New;">$num[] = (int)</span><a style="font-family: Courier New;" href="jx9_builtin.html">fgets</a><span style="font-family: Courier New;">(</span><span style="font-family: Courier New;">STDIN</span><span style="font-family: Courier New;">);</span><br style="font-family: Courier New;">
<br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Another number\n"</span><span style="font-family: Courier New;">;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
$num[] = (int)</span><a style="font-family: Courier New;" href="jx9_builtin.html">fgets</a><span style="font-family: Courier New;">(</span><span style="font-family: Courier New;">STDIN</span><span style="font-family: Courier New;">);</span><br style="font-family: Courier New;">
<br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Finally, one last number\n"</span><span style="font-family: Courier New;">;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
$num[] = (int)</span><a style="font-family: Courier New;" href="jx9_builtin.html">fgets</a><span style="font-family: Courier New;">(</span><span style="font-family: Courier New;">STDIN</span><span style="font-family: Courier New;">);</span><br style="font-family: Courier New;">
<br style="font-family: Courier New;">
<span style="color: green; font-family: Courier New;">//show content</span><br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"Before sorting\n"</span><span style="font-family: Courier New;">;</span><br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> $num;</span><br style="font-family: Courier New;">
<br style="font-family: Courier New;">
<span style="color: green; font-family: Courier New;">//Sort the array now</span><br style="font-family: Courier New;">
<a style="font-family: Courier New;" href="../../jx9/website/builtin_func.html">sort</a><span style="font-family: Courier New;">($num);</span><br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"\nAfter sorting\n"</span><span style="font-family: Courier New;">;</span><br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> $num;</span><br style="font-family: Verdana;">
</span></span></small><small>
<span style="font-family: Verdana;"></span></small><br>
</div>


<p style="margin-bottom: 0.5cm; font-weight: normal;" align="left">
</p>

<p style="margin-bottom: 0cm;" lang="en-US"><font face="Verdana, sans-serif"><font size="2">This
simple Jx9 script ask for three numbers (64 bit integers)
from the standard input (STDIN), store the given numbers in a JSON
array, perform a merge-sort using the <a href="jx9_builtin.html">built-in</a>
sort function and output the sorted array. </font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">A
typical output of this program would look like this:</font></font></p>

<p style="margin-bottom: 0cm;" lang="en-US"><br>
</p>

<div style="margin-left: 70px; width: 543px;" id="code"><small style="font-family: Courier New;">Enter a number<br>
&nbsp;<span style="font-weight: bold;">50232</span><br>
Another number<br>
&nbsp; <span style="font-weight: bold;">80</span><br>
Finally, one last number<br>
&nbsp; <span style="font-weight: bold;">0xff</span><br>
Before sorting<br>
&nbsp; <span style="font-weight: bold;">[50232,80,255]</span><br>
After sorting<br>
&nbsp; <span style="font-weight: bold;">[80,255,50232]</span></small><br>
</div>

<br>

<p style="margin-bottom: 0cm;" lang="en-US"><font face="Verdana, sans-serif"><font size="2">&nbsp;An implementation of the famous factorial function in Jx9.<br>
</font></font><br>
</p>


<div style="margin-left: 70px; width: 778px;" id="code">
<p style="margin-bottom: 0cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font style="font-family: Courier New;" color="#0000ff">print</font>
<font style="font-family: Courier New;" color="#ff0000">"Enter a number\n"</font><span style="font-family: Courier New;">;</span></font></font></p>

<p style="margin-bottom: 0cm; font-family: Courier New;"><font style="font-size: 10pt;" size="2">$num
= <font color="#0000ff">(int)</font>fgets(STDIN);</font></p>
<p style="margin-bottom: 0cm; font-family: Courier New;"><font style="font-size: 10pt;" size="2"><br>
</font></p>

<p style="font-family: Courier New;"><font style="font-size: 10pt;" size="2"><font color="#0000ff">function</font>
factorial(<font color="#0000ff">int</font> $num)</font></p>
<p style="font-family: Courier New;"><font style="font-size: 10pt;" size="2">{</font></p>

<p style="font-family: Courier New;">&nbsp;  <font style="font-size: 10pt;" size="2"><font color="#0000ff">if</font>(
 $num == 0 || $num == 1 )</font></p>

<p style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;     <font style="font-size: 10pt;" size="2"><font color="#0000ff">return</font>
1;</font></p>

<p style="font-family: Courier New;">&nbsp;   <font style="font-size: 10pt;" size="2"><font color="#0000ff">else</font></font></p>

<p style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;      <font color="#0000ff"><font style="font-size: 10pt;" size="2">return</font></font><font style="font-size: 10pt;" size="2">
$num</font><code class="western"><font style="font-size: 10pt;" size="2">
* factorial($num – 1);</font></code><font style="font-size: 10pt;" size="2">
</font>
</p>

<p style="font-family: Courier New;"><font style="font-size: 10pt;" size="2">}</font></p>

<p style="margin-bottom: 0cm; font-family: Courier New;"><font style="font-size: 10pt;" size="2"><font color="#0000ff">print</font>
<font color="#ff0000">"Facorial of $num = "</font>.. </font><small><span style="color: green;">
/* .. (Two dots) is the concatenation operator*/</span></small><font style="font-size: 10pt;" size="2"> factorial($num);</font></p>


</div>

<p style="margin-bottom: 0cm;" lang="en-US">
</p>


<small><span style="font-weight: bold;"></span></small>
<p style="margin-bottom: 0cm;" lang="en-US"><br>
</p>


<p style="margin-bottom: 0cm;" lang="en-US">
</p>

<p style="margin-bottom: 0cm;" lang="en-US"><font face="Verdana, sans-serif"><font size="2">Another script which demonstrate how Jx9
can be used for processing external configuration file based on JSON
using the built-in <a style="font-family: Courier New;" href="jx9_builtin.html">json_encode() </a>and
<a style="font-family: Courier New;" href="jx9_builtin.html">json_decode()</a> functions.</font></font></p>

<p style="margin-bottom: 0cm;" lang="en-US"><font face="Verdana, sans-serif"><font size="2"><br>
</font></font></p>


<p style="margin-bottom: 0cm;" lang="en-US">
</p>


<div style="margin-left: 70px; width: 623px;" id="code"><small style="font-family: Courier New;"><span style="color: green;">// ---------------------- config_writer.jx9 ----------------------------</span></small><br style="font-family: Courier New;">
<small style="font-family: Courier New;"><span style="color: green;"><br>
// Create a dummy JSON object configuration</span><br>
$my_config =&nbsp; {<br>
&nbsp; bind_ip : <span style="color: red;">"127.0.0.1"</span>,<br>
&nbsp; config : <span style="color: red;">"/etc/symisc/jx9.conf"</span>,<br>
&nbsp; dbpath : <span style="color: red;">"/usr/local/unqlite"</span>,<br>
&nbsp; fork : true,<br>
&nbsp; logappend : true,<br>
&nbsp; logpath : <span style="color: red;">"/var/log/jx9.log"</span>,<br>
&nbsp; quiet : true,<br>
&nbsp; port : 8080<br>
&nbsp;};<br>
<span style="color: green;"><br>
// Dump the JSON object</span><br>
<span style="color: blue;">print</span> $my_config;<br>
<br>
<span style="color: green;">// Write to disk</span><br>
$file = <span style="color: red;">"config.json.txt"</span>;<br>
<span style="color: blue;">print</span> <span style="color: red;">"\n\n------------------\nWriting JSON object to disk file: '$file'\n"</span>;<br>
<span style="color: green;"><br>
// Create the file</span><br>
$fp = <a href="jx9_builtin.html">fopen</a>($file,<span style="color: red;">'w+'</span>);<br>
<span style="color: blue;">if</span>( !$fp )<br>
&nbsp;&nbsp;&nbsp; <a href="../../jx9/website/builtin_func.html">exit</a>(<span style="color: red;">"Cannot create $file"</span>);<br>
<span style="color: green;"><br>
// Write the JSON object</span><br>
<a href="jx9_builtin.html">fwrite</a>($fp,$my_config);<br>
<span style="color: green;"><br>
// Close the file</span><br>
<a href="jx9_builtin.html">fclose</a>($fp);<br>
<span style="color: green;"><br>
// All done</span><br>
<span style="color: blue;">print</span> <span style="color: red;">"$file successfully created on: "</span>..__DATE__..' '..__TIME__;<span style="font-weight: bold;"></span></small><br style="font-family: Courier New;">
<small style="font-family: Courier New;"><span style="color: green;"><br>
// ---------------------- config_reader.jx9 ----------------------------</span></small><br style="font-family: Courier New;">
<small><span style="color: green; font-family: Courier New;"><br>
// Read the configuration file defined above</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
$iSz = </span><a style="font-family: Courier New;" href="jx9_builtin.html">filesize</a><span style="font-family: Courier New;">($zFile); </span><span style="color: green; font-family: Courier New;">// Size of the whole file</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
$fp = </span><a style="font-family: Courier New;" href="jx9_builtin.html">fopen</a><span style="font-family: Courier New;">($zFile,</span><span style="color: red; font-family: Courier New;">'r'</span><span style="font-family: Courier New;">); </span><span style="color: green; font-family: Courier New;">// Read-only mode</span><br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;">if</span><span style="font-family: Courier New;">( !$fp ){</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
&nbsp;&nbsp; </span><a style="font-family: Courier New;" href="jx9_builtin.html">exit</a><span style="font-family: Courier New;">(</span><span style="color: red; font-family: Courier New;">"Cannot open '$zFile'"</span><span style="font-family: Courier New;">);</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
}</span><br style="font-family: Courier New;">
<span style="color: green; font-family: Courier New;"><br>
// Read the raw content</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
$zBuf = </span><a style="font-family: Courier New;" href="jx9_builtin.html">fread</a><span style="font-family: Courier New;">($fp,$iSz);</span><br style="font-family: Courier New;">
<span style="color: green; font-family: Courier New;"><br>
// decode the JSON object now</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
$my_config = </span><a style="font-family: Courier New;" href="jx9_builtin.html">json_decode</a><span style="font-family: Courier New;">($zBuf);</span><br style="font-family: Courier New;">
<span style="color: blue; font-family: Courier New;">if</span><span style="font-family: Courier New;">( !$my_config ){</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
&nbsp;&nbsp;&nbsp; print </span><span style="color: red; font-family: Courier New;">"JSON decoding error\n"</span><span style="font-family: Courier New;">;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
}</span><span style="color: blue; font-family: Courier New;">else</span><span style="font-family: Courier New;">{</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
&nbsp; </span><span style="color: green; font-family: Courier New;">// Dump the JSON object</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
&nbsp; </span><span style="color: blue; font-family: Courier New;">foreach</span><span style="font-family: Courier New;">( $my_config </span><span style="color: blue; font-family: Courier New;">as</span><span style="font-family: Courier New;"> $key,$value ){</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
&nbsp;&nbsp; </span><span style="color: blue; font-family: Courier New;">print</span><span style="font-family: Courier New;"> </span><span style="color: red; font-family: Courier New;">"$key ===&gt; $value\n"</span><span style="font-family: Courier New;">;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
&nbsp; }</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
}</span><br style="font-family: Courier New;">
<span style="color: green; font-family: Courier New;"><br>
// Close the file</span><br style="font-family: Courier New;">
<a style="font-family: Courier New;" href="jx9_builtin.html">fclose</a><span style="font-family: Courier New;">($fp);</span><br>
</small>
</div>


<p style="margin-bottom: 0.5cm; font-weight: normal;" align="left">
</p>

<p style="margin-bottom: 0cm;" lang="en-US">
</p>

<p><font face="Verdana, sans-serif"><font size="2">The first script
generate a JSON object holding some dummy configuration fields,
create a disk file named <span style="font-family: Courier New;">config.json.txt</span> using <a style="font-family: Courier New;" href="jx9_builtin.html">fopen()</a> and serialize the JSON object to disk using <a style="font-family: Courier New;" href="jx9_builtin.html">fwrite()</a> while the second
script perform the reverse operation using the <a style="font-family: Courier New;" href="jx9_builtin.html">fread()</a>
and <a style="font-family: Courier New;" href="jx9_builtin.html">json_decode()</a> functions.&nbsp;</font></font></p>
<p><font face="Verdana, sans-serif"><font size="2"><br>
</font></font></p>

<p>
</p>
<p style="margin-bottom: 0cm; font-weight: normal;"><font face="Verdana, sans-serif"><font size="2">And
finally, a Jx9 script which store JSON objects (a collections of
dummy users) in a UnQLite database.</font></font></p>


<br>
<div style="text-align: left; font-family: Courier New; margin-left: 40px; width: 668px;" id="code">
<p><font face="Courier New, monospace"><font size="2"><span style="font-weight: normal;"><span style="color: red;"></span><span style="color: green;"><br>
</span></span></font></font></p>

<p style="color: green;"><font face="Courier New, monospace"><font size="2">/* Create
the collection 'users'&nbsp; */</font></font></p>

<p> <font face="Courier New, monospace"><font size="2"><span style="color: blue;">if</span>(
!<a href="jx9_func/db.html#db_exists">db_exists</a>(</font></font><font face="Courier New, monospace"><font size="2"><span style="color: red;">'users'</span></font></font><font face="Courier New, monospace"><font size="2">) ){</font></font></p>

<p>&nbsp;&nbsp;&nbsp;  <font style="color: green;" face="Courier New, monospace"><font size="2">/* Try to
create it */</font></font></p>

<p>&nbsp;&nbsp; <font face="Courier New, monospace"><font size="2">$rc =
<a href="jx9_func/db.html#db_create">db_create</a>(</font></font><font face="Courier New, monospace"><font size="2"><span style="color: red;">'users'</span></font></font><font face="Courier New, monospace"><font size="2">);</font></font></p>

<p>&nbsp;&nbsp;   <font face="Courier New, monospace"><font size="2"><span style="color: blue;">if</span> ( !$rc ){</font></font></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;      <font style="color: green;" face="Courier New, monospace"><font size="2">//Handle
error</font></font></p>


<p>&nbsp; &nbsp;&nbsp;&nbsp; <font face="Courier New, monospace"><font size="2">print <a href="jx9_func/db.html#db_errlog">db_errlog()</a>;<br>
</font></font></p>
<p><font face="Courier New, monospace"><font size="2"><span style="color: blue;">&nbsp;&nbsp; return</span>;</font></font></p>


<p>&nbsp;&nbsp;   <font face="Courier New, monospace"><font size="2">}</font></font></p>



<p><font face="Courier New, monospace"><font size="2">}</font></font></p>
<p style="color: green;"><font face="Courier New, monospace"><font size="2">//The following is the records to be stored shortly in our collection</font></font></p>
<p><font face="Courier New, monospace"><font size="2">$zRec = [</font></font></p>
<p><font face="Courier New, monospace"><font size="2">{</font></font></p>
<p><font face="Courier New, monospace"><font size="2">&nbsp;&nbsp; name : </font></font><font face="Courier New, monospace"><font size="2"><span style="color: red;">'james'</span></font></font><font face="Courier New, monospace"><font size="2">,</font></font></p>
<p><font face="Courier New, monospace"><font size="2">&nbsp;&nbsp; age&nbsp; : 27,</font></font></p>
<p><font face="Courier New, monospace"><font size="2">&nbsp;&nbsp; mail : </font></font><font face="Courier New, monospace"><font size="2"><span style="color: red;">'dude@example.com'</span></font></font></p>
<p><font face="Courier New, monospace"><font size="2">},</font></font></p>
<p><font face="Courier New, monospace"><font size="2">{</font></font></p>
<p><font face="Courier New, monospace"><font size="2">&nbsp;&nbsp; name : </font></font><font face="Courier New, monospace"><font size="2"><span style="color: red;">'robert'</span></font></font><font face="Courier New, monospace"><font size="2">,</font></font></p>
<p><font face="Courier New, monospace"><font size="2">&nbsp;&nbsp; age&nbsp; : 35,</font></font></p>
<p><font face="Courier New, monospace"><font size="2">&nbsp;&nbsp; mail : </font></font><font face="Courier New, monospace"><font size="2"><span style="color: red;">'rob@example.com'</span></font></font></p>
<p><font face="Courier New, monospace"><font size="2">},</font></font></p>
<p><font face="Courier New, monospace"><font size="2">{</font></font></p>
<p><font face="Courier New, monospace"><font size="2">&nbsp;&nbsp; name : </font></font><font face="Courier New, monospace"><font size="2"><span style="color: red;">'monji'</span></font></font><font face="Courier New, monospace"><font size="2">,</font></font>
</p>
<p><font face="Courier New, monospace"><font size="2">&nbsp;&nbsp; age&nbsp; : 47,</font></font></p>

<p><font face="Courier New, monospace"><font size="2">&nbsp;&nbsp; mail : </font></font><font face="Courier New, monospace"><font size="2"><span style="color: red;">'monji@example.com'</span></font></font></p>

},<br>
{<br>
&nbsp;<font face="Courier New, monospace"><font size="2"> name : </font></font><font face="Courier New, monospace"><font size="2"><span style="color: red;">'barzini'</span></font></font><font face="Courier New, monospace"><font size="2">,</font></font>
<p><font face="Courier New, monospace"><font size="2">&nbsp; age&nbsp; : 52,</font></font></p>

<p><font face="Courier New, monospace"><font size="2">&nbsp; mail : </font></font><font face="Courier New, monospace"><font size="2"><span style="color: red;">'barz@mobster.com'</span></font></font></p>
<p><font face="Courier New, monospace"><font size="2">}</font></font></p>

<p><font face="Courier New, monospace"><font size="2">];<br>
</font></font></p>
<p style="color: green;"><font face="Courier New, monospace"><font size="2">//Store our records<br>
</font></font></p><font face="Courier New, monospace"><font size="2">$rc = </font></font><font face="Courier New, monospace"><font size="2"><a href="jx9_func/db.html#db_store">db_store</a>(<span style="color: red;">'users'</span>,$zRec<span style="color: red;"></span>);<br>
<span style="color: blue;">if</span>( !$rc ){<br>
&nbsp;</font></font><font style="color: green;" face="Courier New, monospace"><font size="2">//Handle
error</font></font>


<p>&nbsp; &nbsp; <font face="Courier New, monospace"><font size="2"><span style="color: blue;">print</span> <a href="jx9_func/db.html#db_errlog">db_errlog()</a>;<br>
</font></font></p>

<p><font face="Courier New, monospace"><font size="2"><span style="color: blue;">&nbsp; return</span>;</font></font></p>
<font face="Courier New, monospace"><font size="2">}</font></font><font face="Courier New, monospace"><font size="2"><br>
<span style="color: green;">//Create our filter callback</span><br>
$zCallback = <span style="color: blue;">function</span>($rec){<br>
&nbsp;&nbsp;&nbsp; <span style="color: green;">//Allow only users &gt;= 30 years old.</span><br>
&nbsp;&nbsp;&nbsp; <span style="color: blue;">if</span>( $rec.age &lt; 30 ){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green;">// Discard this record</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span> FALSE;<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp; <span style="color: green;">//Record correspond to our criteria</span><br>
&nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span> TRUE;<br>
&nbsp;}; </font></font><font face="Courier New, monospace"><font size="2"><span style="color: green;">//Don't forget the semi-colon here</span></font></font><br>
<br>
<font face="Courier New, monospace"><font size="2"><span style="color: green;">//Retrieve collection records and apply our filter callback</span><br>
$data = <span style="font-weight: bold;">db_fetch_all</span>(<span style="color: red;">'users'</span>,$zCallback); <br>
<br>
<span style="color: blue;">print</span> $data; <span style="color: green;">//JSON array holding the filtered records</span><br>
<span style="color: green;"></span><br>
</font></font>


</div>
<p><br>
</p>
<hr style="width: 100%; height: 2px;">
<p><font face="Verdana, sans-serif"><font size="2">As
you can see, Jx9 is a powerful programming language with a friendly
and familiar syntax </font></font><font face="Verdana, sans-serif"><font size="2">built </font></font><font face="Verdana, sans-serif"><font size="2">with a rich <a href="jx9_builtin.html">standard
library</a> with over 312 functions and 142 <a href="jx9_builtin.html#const">constants</a>
suitable for most purposes. Refer to the <a href="jx9_lang.html">Jx9
Language Reference Manual</a> for additional information. </font></font><font color="#000000"><span style="text-decoration: none;"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">The
      <a href="api_intro.html#doc_store">Document store</a> to UnQLite which is used to store JSON docs (i.e.
Objects, Arrays, Strings, etc.) in the database is powered by the Jx9
programming language.</span></span></span></font></font></span></font></p>
<p><font color="#000000"><span style="text-decoration: none;"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;"></span></span></span></font></font></span></font></p>
</div>
<hr style="width: 100%; height: 2px;">
<div style="text-align: right; margin-top: 0px; height: 91px;"><small><small><a href="http://www.symisc.net/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc Systems" src="images/symisc.png"></a></small></small>
<div style="text-align: left; margin-top: 0px; height: 14px;"><small><small style="font-family: Verdana;">Copyright © <a href="http://www.symisc.net/">Symisc Systems</a></small></small><br>
</div>
</div>
</div>

</body></html>