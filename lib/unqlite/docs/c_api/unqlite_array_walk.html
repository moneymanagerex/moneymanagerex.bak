<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><head>











  
  <meta content="text/html; charset=UTF-8" http-equiv="content-type"><title>UnQLite C/C++ API Reference - JSON Array/Object handling</title><!-- Copyright (C) 2013 Mrad Chems Eddine, Symisc Systems,http://www.symisc.net contact@symisc.net -->
  

  

  
  <link rel="stylesheet" href="symisc.css" type="text/css">

  
  <meta content="Symisc Systems &lt;chm@symisc.net&gt;" name="author">

  
  <meta content="http://unqlite.org/" name="description"></head><body>
<div style="width: 1092px;" id="main_div"><a href="http://unqlite.org/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc UnQLite" title="Symisc UnQLite" src="../images/symisc-unqlite.png"></a><br>
<div style="text-align: left; width: 1080px;" align="right">
<table style="text-align: left; width: 1075px; height: 41px;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; width: 709px; height: 45px;"><small style="color: black; font-family: Verdana;"><small><br>
An Embeddable NoSQL Database Engine<br>
      </small></small></td>
      <td style="vertical-align: top; width: 162px; height: 45px;"><br>
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="unqlite_db" data-size="large">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
      <td style="vertical-align: top; width: 176px; height: 45px;"><br>
      <a href="https://twitter.com/unqlite_db" class="twitter-follow-button" data-show-count="false" data-size="large">Follow
@unqlite_db</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
    </tr>
  </tbody>
</table>
</div>
<hr style="width: 100%; height: 2px;">
<ul id="nav">
  <li id="nav-1"><a href="../index.html">About</a></li>
  <li id="nav-8"><a href="../features.html">Distinctive Features<br>
    </a></li>
  <li id="nav-2"><a href="../intro.html">Getting Started<br>
    </a></li>
  <li id="nav-3"><a href="../c_api.html">Documentation<br>
    </a></li>
  <li id="nav-4"><a href="../downloads.html">Downloads<br>
    </a></li>
  <li id="nav-5"><a href="../licensing.html">License<br>
    </a></li>
  <li id="nav-6"><a href="../faq.html">FAQ<br>
    </a></li>
  <li id="nav-7"><a href="../support.html">Online Support<br>
    </a></li>
</ul>
<h1 style="font-family: Verdana;"><font style="font-size: 10pt;" size="2">UnQLite</font><small><small><b> C/C++ API Reference - JSON Array/Object handling</b></small></small><font><font><b><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>.</b></font></font></b></font></font></h1>

<div><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Syntax</b></font></font><br>
<br>
<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font style="font-size: 10pt;" size="2"><font color="#0000ff">int</font><font color="#000000"> <span style="font-weight: bold;">unqlite_array_walk</span>(</font></font></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font style="font-size: 10pt;" size="2"><font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unqlite_value</font><font color="#000000">
*pArray,</font></font></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font style="font-size: 10pt;" size="2"><font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int</font><font color="#000000">
(*xWalk)(</font><font color="#0000ff">unqlite_value</font><font color="#000000">
*pKey,</font><font color="#0000ff">unqlite_value</font><font color="#000000">
*pValue,</font><font color="#0000ff">void</font><font color="#000000">
*pUserData),</font></font></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font style="font-size: 10pt;" size="2"><font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void</font><font color="#000000">
*pUserData</font></font></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font color="#000000"><font style="font-size: 10pt;" size="2">);</font></font></p>
<br>




<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">Iterate over the elements of a given JSON array or object and invoke the supplied callback for each entry.</font></font></p>



<p style="margin-left: 0.2cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><br>
</font></font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Description</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">This
routine iterate over the elements of a given array or object and invokes the
supplied walker </span></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">callback for each </span></font></font><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">entry</span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">.
The first argument (pArray) must be of type array or object obtained by a prior
successful call to </span></font></font><a style="font-family: Courier New;" href="unqlite_value_alloc.html"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">unqlite_vm_new_array()</span></font></a><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">,</span></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;"> </span></font></font><a style="font-family: Courier New;" href="unqlite_value_alloc.html"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">unqlite_context_new_array()</span></font></a><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">
or passed as parameter to the </span></font></font><a href="unqlite_create_function.html"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">foreign
function</span></font></font></a><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">.
Otherwise,</span></font></font><a href="../../../jx9/website/c_api_object.html#jx9_value"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;"></span></font></font></a><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;"> this routine return immediately and the
walk process could not be done.</span></font></font></p>





<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">The
most interesting parameter is the walker callback
which is an user defined function that is invoked for each array or object
entry. The callback must accept three arguments. The first argument
is the entry key and the
second argument is the entry value which could be any type even
others JSON arrays and objects and the
third and last argument is a copy of the third argument to this
function which is forwarded verbatim by engine.</font></font></p>



<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">The
callback must return </span><b style="font-family: Courier New;">UNQLITE_OK</b><span style="font-weight: normal;">. Otherwise the walk process is
aborted and this function return </span><b style="font-family: Courier New;">UNQLITE_ABORT</b><span style="font-weight: normal;">.</span></font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">The
key and entry value could be extracted inside the callback using
these interfaces:</font></font></p>
<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></p>


<p style="margin-left: 2.5cm; margin-bottom: 0cm; font-weight: normal;">
<font color="#000000"> </font><font style="font-family: Courier New;" face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="unqlite_value_cast.html">unqlite_value_to_int()</a></font></font></p>

<p style="margin-left: 2.5cm; margin-bottom: 0cm; font-weight: normal; font-family: Courier New;">
<font color="#000000"> </font><font style="font-size: 10pt;" size="2"><a href="unqlite_value_cast.html">unqlite_value_to_bool()</a></font></p>

<p style="margin-left: 2.5cm; margin-bottom: 0cm; font-weight: normal; font-family: Courier New;">
<font color="#000000"> <font style="font-size: 10pt;" size="2"><a href="unqlite_value_cast.html">unqlite_value_to_int64()</a></font></font></p>

<p style="margin-left: 2.5cm; margin-bottom: 0cm; font-weight: normal; font-family: Courier New;">
<font color="#000000"> </font><font style="font-size: 10pt;" size="2"><a href="unqlite_value_cast.html">unqlite_value_to_double()</a></font></p>

<p style="margin-left: 2.5cm; margin-bottom: 0cm; font-weight: normal; font-family: Courier New;">
<font color="#000000"> </font><font style="font-size: 10pt;" size="2"><a href="unqlite_value_cast.html">unqlite_value_to_string()</a></font></p>

<p style="margin-left: 2.5cm; margin-bottom: 0cm; font-weight: normal; font-family: Courier New;">
<font color="#000000"> </font><font style="font-size: 10pt;" size="2"><a href="unqlite_value_cast.html">unqlite_value_to_resource()</a></font></p>

<p style="margin-left: 2.5cm; margin-bottom: 0cm; font-family: Courier New;"><font color="#000000">
</font><font style="font-size: 10pt;" size="2"><a href="unqlite_value_cast.html"><span style="font-weight: normal;">unqlite_value_compare()</span></a></font></p>

<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"><br>
</span></font></font></font></p>

<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"><span style="font-style: italic;">Note</span>: The key and its value are passed to the callback by copy.
That is, any subsequent changes to their types or values is not
reflected. If you want to modify the entry value use <a style="font-family: Courier New;" href="unqlite_array_fetch.html">unqlite_array_fetch()</a> instead.</span></font></font></font></p>
<p style="margin-left: 1.25cm;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-style: italic;"><br>
</span></font></font></font></p>
<p style="margin-left: 1.25cm;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-style: italic;">Note2</span>: This routine is not thread-safe.</font></font></font></p>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">&nbsp;<br>
</span></font></font></font></p>



<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Parameters</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>

<table style="width: 1092px; height: 72px;" id="table_code" border="1" bordercolor="#000000" cellpadding="2" cellspacing="0">

  <colgroup><col width="73*"> <col width="183*"> </colgroup><tbody>
    <tr valign="top">
      <td width="28%">
      
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>pArray</b></font></font></font></div>
</td>
      <td width="72%">
      
      <p><font style="font-family: Courier New;" face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="../c_api_object.html#unqlite_value">unqlite_value </a></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif">to walk which must be of type array or object</font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">.<br>
      </font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"></font></font></p>
      </td>
    </tr><tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>xWalk</b></font></font></font></div>
      </td>
      <td style="vertical-align: top;">
      <p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif">Walker callback which is
invoked for each array entry. If the callback wishes to abort the walk
process, it must return a value different from <a style="font-family: Courier New;" href="../c_api_const.html">UNQLITE_OK</a> such as <a style="font-family: Courier New;" href="../c_api_const.html">UNQLITE_ABORT</a>.</font></font></font></p>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>pUserDara</b></font></font></font></div>
      </td>
      <td style="vertical-align: top;">
      <p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">Arbitrary user pointer which is forwarded verbatim by the
engine to the walker callback as its third argument.</font></font></p>
      </td>
    </tr>

  </tbody>
</table>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Return
value</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><span style="font-family: Courier New;">UNQLITE_OK</span> </b>is returned<b> </b>on success. Any other return value
indicates failure</font></font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;">
</p>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Example</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>

<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="http://unqlite.org/db/unqlite_func_intro.c"><font face="Verdana, sans-serif"><span style="font-weight: normal;">Compile this C file</span></font></a><font face="Verdana, sans-serif"><span style="font-weight: normal;">
for a smart introduction to the JSON </span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">array/object handling interfaces</span></font></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">.</span></font></font></font></p>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"><br>
</span></font></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>See also<br>
</b></font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>


<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="http://unqlite.org/db/unqlite_func_intro.c"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></a><font face="Verdana, sans-serif"><span style="font-weight: normal;"><a href="unqlite_array_add_elem.html">unqlite_array_add_elem</a>, <a href="unqlite_array_count.html">unqlite_array_count</a>,</span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"> <a href="unqlite_array_fetch.html">unqlite_array_fetch</a>.<br>
</span></font></font></font></p>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"><br>
</span></font></font></font></p>


</div>
<hr style="width: 100%; height: 2px;">
<div style="text-align: right; margin-top: 0px; height: 91px;"><small><small><a href="http://www.symisc.net/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc Systems" src="../images/symisc.png"></a></small></small>
<div style="text-align: left; margin-top: 0px; height: 14px;"><small><small style="font-family: Verdana;">Copyright © <a href="http://www.symisc.net/">Symisc Systems</a></small></small><br>
</div>
</div>
</div>

</body></html>