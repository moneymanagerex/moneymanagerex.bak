<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><head>































  
  <meta content="text/html; charset=UTF-8" http-equiv="content-type"><title>UnQLite C/C++ API Reference - Database Engine Handle</title><!-- Copyright (C) 2013 Mrad Chems Eddine, Symisc Systems,http://www.symisc.net contact@symisc.net -->
  

  

  
  <link rel="stylesheet" href="symisc.css" type="text/css">

  
  <meta content="Symisc Systems - Mrad Chems Eddine &lt;chm@symisc.net&gt;" name="author">

  
  <meta content="http://unqlite.org/" name="description"></head><body>
<div style="width: 1092px;" id="main_div"><a href="http://unqlite.org/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc UnQLite" title="Symisc UnQLite" src="../images/symisc-unqlite.png"></a><br>
<div style="text-align: left; width: 1080px;" align="right">
<table style="text-align: left; width: 1075px; height: 41px;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; width: 709px; height: 45px;"><small style="color: black; font-family: Verdana;"><small><br>
An Embeddable NoSQL Database Engine<br>
      </small></small></td>
      <td style="vertical-align: top; width: 162px; height: 45px;"><br>
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="unqlite_db" data-size="large">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
      <td style="vertical-align: top; width: 176px; height: 45px;"><br>
      <a href="https://twitter.com/unqlite_db" class="twitter-follow-button" data-show-count="false" data-size="large">Follow
@unqlite_db</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
    </tr>
  </tbody>
</table>
</div>
<hr style="width: 100%; height: 2px;">
<ul id="nav">
  <li id="nav-1"><a href="../index.html">About</a></li>
  <li id="nav-8"><a href="../features.html">Distinctive Features<br>
    </a></li>
  <li id="nav-2"><a href="../intro.html">Getting Started<br>
    </a></li>
  <li id="nav-3"><a href="../c_api.html">Documentation<br>
    </a></li>
  <li id="nav-4"><a href="../downloads.html">Downloads<br>
    </a></li>
  <li id="nav-5"><a href="../licensing.html">License<br>
    </a></li>
  <li id="nav-6"><a href="../faq.html">FAQ<br>
    </a></li>
  <li id="nav-7"><a href="../support.html">Online Support<br>
    </a></li>
</ul>
<h1 style="font-family: Verdana;"><font style="font-size: 10pt;" size="2">UnQLite</font><small><small><b> C/C++ API Reference - Database Engine Handle</b></small></small><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">.</font></font></h1>


<div><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Syntax</b></font></font><br>
<br>
<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;">
</p>



<div style="margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font color="#000000"><span style="font-family: Courier New;"><span style="color: blue;">int</span> <span style="font-weight: bold;">unqlite_open</span>(</span><span style="font-family: Courier New;"><span style="color: blue;">unqlite</span> **ppDB,<span style="color: blue;">const char</span> *zFilename,<span style="color: blue;">unsigned int</span> iMode</span><span style="font-family: Courier New;"></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font color="#000000"><span style="font-family: Courier New;">);</span><br>
</font></font></font></div>

<p style="margin-bottom: 0cm; margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;"><br>
</span></span></span></font></font></font></p>
<p style="margin-bottom: 0cm; margin-left: 40px;">
</p>
<p style="margin-bottom: 0cm; font-style: normal; font-weight: normal; margin-left: 40px;" lang="en-US"><font face="Verdana, sans-serif"><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">Opening a new database connection.</span></span></span></font></font></font></p>



<p style="margin-bottom: 0cm; margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;"><br>
</span></span></span></font></font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Description</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>

<span style="font-weight: bold;"></span>

<p style="margin-left: 40px; font-family: Verdana;"><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">This
routine a</span></span></span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2">llocate
and initialize a new database object handle </font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">whose name is given by the
</span></span></span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><i><span style="font-weight: normal;">zFilename</span></i></span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">
argument. A </span></span></span></font></font></font><font face="Verdana, sans-serif"><font size="2">database
connection</font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">
handle</span></span></span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">
is usually returned in </span></span></span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><i><span style="font-weight: normal;">*ppDb</span></i></span></font></font></font><font color="#000000"><font style="font-size: 10pt;" size="2"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">
but, if the engine is unable to allocate memory to hold the <a style="font-family: Courier New;" href="../c_api_object.html#unqlite">unqlite</a>
object, a NULL will be written into <span style="font-style: italic;">*ppDb</span> instead of a pointer to the
<a style="font-family: Courier New;" href="../c_api_object.html#unqlite">unqlite</a> object. </span></span></span></font><span style="font-style: normal;">This routine is often the first API call that an application
makes and is a prerequisite in order to work with the database library.</span></font></font></p>
<p style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;"><br>
 </span></span></span></font></font></font>
</p>

<p style="margin-left: 40px;"><font face="Verdana, sans-serif"><font size="2">If </font></font><font face="Verdana, sans-serif"><font size="2"><i><span style="font-weight: normal;">zfilename</span></i></font></font><font face="Verdana, sans-serif"><font size="2">
is </font></font><font style="font-family: Courier New;" face="Verdana, sans-serif"><font size="2"><b>":mem:"</b></font></font><font face="Verdana, sans-serif"><font size="2">
or </font></font><font style="font-family: Courier New;" face="Verdana, sans-serif"><font size="2"><b>NULL</b></font></font><font face="Verdana, sans-serif"><font size="2">,
then a private, in-memory database is created for the
connection. The in-memory database will vanish when the database
connection is closed. Future versions of UnQLite might make use of
additional special filenames that begin with the ":"
character. It is recommended that when a database filename actually
does begin with a ":" character you should prefix the
filename with a pathname such as "./" to avoid ambiguity.</font></font>
</p>

<p style="margin-left: 40px;"><font face="Verdana, sans-serif"><font size="2"><i>Note:
Transactions are not supported for <b>in-memory</b> databases.</i></font></font></p>
<p style="margin-left: 40px;"><font face="Verdana, sans-serif"><font size="2"><i><br>
</i></font></font></p>
<p style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font size="2">The
last parameter (<span style="font-family: Courier New;">iMode)</span> control the database access mode (See
parameter description for possible combination).</font></font></font></p>
<p style="margin-left: 40px;"><br>
</p>
<p style="margin-left: 40px;">
</p>
<p style="margin-bottom: 0cm; font-style: normal; font-weight: normal; margin-left: 40px;" lang="en-US">
<font color="#000000"><font face="Verdana, sans-serif"><font size="2"><i>Note</i>:
This routine does not open the target database file. It merely
initialize and prepare the database object handle for later usage.</font></font></font></p>
<p style="margin-bottom: 0cm; font-style: normal; font-weight: normal;" lang="en-US">
</p>
<p style="margin-bottom: 0cm; font-style: normal; font-weight: normal;" lang="en-US">
</p>
<br>
<font face="Verdana, sans-serif"><font style="font-size: 11pt;" size="2"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;"></span></font></font><a href="unqlite_compile.html"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;"></span></font></font></a><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;"> </span></font></font></font></font>

<p style="margin-bottom: 0cm; margin-left: 40px;">
</p><p style="margin-bottom: 0cm; font-style: normal; font-weight: normal;" lang="en-US">
</p>
<p style="margin-bottom: 0cm; font-style: normal; font-weight: normal;" lang="en-US"><font color="#000000"><font face="Verdana, sans-serif"><font size="2"> </font></font></font>
</p>






<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Parameters</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<table style="width: 1092px; height: 72px;" id="table_code" border="1" bordercolor="#000000" cellpadding="2" cellspacing="0"><tbody><tr valign="top"><td width="28%"><span style="font-weight: bold;"></span>
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>ppDb</b></font></font></font></div>
</td>
      <td width="72%">
      <p> <font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-style: italic;">OUT</span>: A fresh database connection handle is written into this pointer.</font></font></p>
      </td>
    </tr><tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>zFilename</b></font></font></font></div>

      </td>
      <td style="vertical-align: top;">
      <p style="margin-bottom: 0cm; font-style: normal; font-weight: normal;" lang="en-US">
<font color="#000000"><font face="Verdana, sans-serif"><font size="2">Relative
or full path to the target database file. If <i>zfilename</i> is
<b>":mem:"</b> or <b>NULL</b> then a private, in-memory database is created for the connection.</font></font></font></p>


      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>iMode</b></font></font></font></div>

      </td>
      <td style="vertical-align: top;"><font color="#000000"><font face="Verdana, sans-serif"><font size="2">Database access mode, the possible flag c</font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2">ombination
is as follows:<br>
      <br>
</font></font></font>
      <p style="margin-bottom: 0cm; font-style: normal;" lang="en-US"><font color="#000000"><font face="Courier New, monospace"><font size="2"><b><span style="color: black;">UNQLITE_OPEN_CREATE</span>:
</b><font face="Verdana, sans-serif"><span style="font-weight: normal;">If
the database does not exists, it is created. Otherwise, it is opened
with read+write privileges. This is the recommended access control
flags for most applications.</span></font></font></font></font></p>

      <p style="margin-bottom: 0cm; font-style: normal;" lang="en-US"><br>
      </p>


      <p style="margin-bottom: 0cm; font-style: normal;" lang="en-US"><font color="#000000"><font face="Courier New, monospace"><font size="2"><b style="color: black;">UNQLITE_OPEN_READWRITE</b><font face="Verdana, sans-serif"><span style="font-weight: normal;">:
Open the database with read+write privileges. If the database does
not exists, an error code is returned.</span></font></font></font></font></p>

      <p style="margin-bottom: 0cm; font-style: normal;" lang="en-US"><br>
      </p>


      <p style="margin-bottom: 0cm; font-style: normal;" lang="en-US"><font color="#000000"><font face="Courier New, monospace"><font size="2"><b style="color: black;">UNQLITE_OPEN_READONLY</b><font face="Verdana, sans-serif"><span style="font-weight: normal;">:
Open the database in a read-only mode. That is, you cannot perform a
      <a href="unqlite_kv_store.html">store</a>, <a href="unqlite_kv_append.html">append</a>, <a href="unqlite_commit.html">commit</a> or <a href="unqlite_rollback.html">rollback</a> operations with this control flag.</span></font></font></font></font></p>

      <p style="margin-bottom: 0cm; font-style: normal;" lang="en-US"><br>
      </p>

      <p style="margin-bottom: 0cm; font-style: normal;" lang="en-US"><font color="#000000"><font face="Courier New, monospace"><font size="2"><b style="color: black;">UNQLITE_OPEN_MMAP</b><font face="Verdana, sans-serif"><span style="font-weight: normal;">:
Obtain a read-only memory view of the whole database. This flag works
only in conjunction with the </span></font><b>UNQLITE_OPEN_READONLY
</b><font face="Verdana, sans-serif"><span style="font-weight: normal;">control
flags (i.e:</span></font></font></font></font></p>
      <p style="margin-bottom: 0cm; font-style: normal; text-align: center;" lang="en-US"><font color="#000000"><font face="Courier New, monospace"><font size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"> </span></font><span style="font-weight: bold; font-family: Courier New;">unqlite_open(&amp;pDb,<span style="color: red;">"test.db"</span>,UNQLITE_OPEN_READONLY|UNQLITE_OPEN_MMAP);</span></font></font></font></p>
      <p style="margin-bottom: 0cm; font-style: normal;" lang="en-US"><font color="#000000"><font face="Courier New, monospace"><font size="2"><span style="font-weight: normal;">)</span><font face="Verdana, sans-serif"><span style="font-weight: normal;">.
You will get significant performance improvements with this
combination but your database is still read-only.</span></font></font></font></font></p>

      <p style="margin-bottom: 0cm; font-style: normal;" lang="en-US"><br>
      </p>

      <p style="margin-bottom: 0cm;"><font style="color: black;" color="#000000"><font face="Courier New, monospace"><font size="2"><span lang="en-US"><span style="font-style: normal;"><b>UNQLITE_OPEN_TEMP</b></span></span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">:
A</span></span></span></font></font></font><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: normal;">
private, temporary on-disk database will be created. This private
database will be automatically deleted as soon as the database
connection is closed. </span></font></font>
      </p>

      <p style="margin-bottom: 0cm;"><br>
      </p>


      <p style="margin-bottom: 0cm;"><font color="#000000"><font face="Courier New, monospace"><font size="2"><span lang="en-US"><span style="font-style: normal;"><b><span style="color: black;">UNQLITE_OPEN_MEM</span>:
</b></span></span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">A
private, in-memory database will be created. </span></span></span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">The
in-memory database will vanish when the database connection is
closed.</span></span></span></font></font></font></p>

      <p style="margin-bottom: 0cm;"><br>
      </p>

      <p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font style="color: black;" color="#000000"><span lang="en-US"><span style="font-style: normal;"><b>UNQLITE_OPEN_OMIT_JOURNALING</b></span></span></font><font color="#000000"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">: </span></span></span></font><font color="#000000"><font face="Verdana, sans-serif"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">(Not
recommended) Disable journaling for this database. In other words,
you will not be able to <a href="unqlite_rollback.html">rollback</a> your database after a crash or power
failure. This flag is automatically set for temporary database.</span></span></span></font></font></font></font></p>

      <p style="margin-bottom: 0cm;"><br>
      </p>

      <p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font style="color: black;" color="#000000"><span lang="en-US"><span style="font-style: normal;"><b>UNQLITE_OPEN_NO_MUTEX</b></span></span></font><font color="#000000"><font face="Verdana, sans-serif"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">:
</span></span></span></font></font><font color="#000000"><font face="Verdana, sans-serif"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">(Not
recommended) Disable the private recursive mutex associated with each
database handle. When set, you should not share this handle
between multiple threads. Otherwise, the result is undefined.</span></span></span></font></font></font></font></p>

      <br>


      </td>
    </tr>

    
    


    
  </tbody>
</table>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Return
value</b></font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
<b></b></font></font></p>
<div style="margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b style="font-family: Courier New;">UNQLITE_OK</b>
is returned on success. Any other return value indicates failure such as:</font></font></div>

<p style="margin-left: 1.25cm; font-weight: normal;">
</p>
<p style="font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;"><b></b></span></span></font></font></font></p><p style="font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;"></span></span></font></font></font></p><p style="font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;"><br>
</span></span></font></font></font></p>


<p style="font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;"><b><span style="font-family: Courier New;">UNQLITE_MEM</span> </b></span></span></font></font></font><font face="Verdana, sans-serif"><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;">Out of memory (Unlikely scenario).</span></span></font></font></font></p>
<p style="font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><br>
</span></span></font></font></font></p>

<p style="font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Example</b></font></font></p>
<p style="font-weight: normal; margin-left: 40px;"><br>
<font face="Verdana, sans-serif"><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"></span></span></font></font></font></p>
<div style="text-align: left; margin-left: 68px; width: 874px;" id="code"><small style="font-family: Courier New;"><span style="color: blue;">#include <span style="color: red;">&lt;unqlite.h&gt;<br>
<br>
</span></span></small><small style="font-family: Courier New;"><span style="color: blue;">int</span> rc;<br>
<span style="color: blue;">unqlite</span> *pDb;<br><span style="color: blue;"></span><br>
</small><small style="font-family: Courier New;"><span style="color: green;">// Open our database;</span></small><br style="font-family: Courier New;">
<small><span style="font-family: Courier New;">rc = <span style="font-weight: bold;">unqlite_open</span>(&amp;pDb,<span style="color: red;">"test.db"</span>,UNQLITE_OPEN_CREATE);<br>
<span style="color: blue;">if</span>( rc != UNQLITE_OK ){ <span style="color: blue;">return</span>; }<br>
</span></small><small style="font-family: Courier New;"><span style="color: green;"><br></span></small><small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"> </span></span></small><small style="font-family: Courier New;"><span style="color: green;">//First data chunk . </span></small><small style="font-family: Courier New;"><span style="color: green;"></span></small><br>
<p style="margin-bottom: 0cm; font-style: normal; font-weight: normal;" lang="en-US">
<font color="#000000"><font face="Verdana, sans-serif"><font size="2"><font face="Courier New, monospace">rc
= <a href="unqlite_kv_store.html">unqlite_kv_store</a>(pDb,</font><font color="#a31515"><font face="Courier New, monospace">"msg"</font></font><font face="Courier New, monospace">,-1,</font><font color="#a31515"><font face="Courier New, monospace">"Hello,
"</font></font><font face="Courier New, monospace">,7); </font><font color="#008000"><font face="Courier New, monospace">//msg
=&gt; 'Hello, '</font></font></font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">	</font><font color="#0000ff">if</font><font color="#000000">(
rc == UNQLITE_OK ){</font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">&nbsp;		</font><font color="#008000">//The second chunk</font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">&nbsp;		rc
= <a href="unqlite_kv_append.html">unqlite_kv_append</a>(pDb,</font><font color="#a31515">"msg"</font><font color="#000000">,-1,</font><font color="#a31515">"Current
time is: "</font><font color="#000000">,17); </font><font color="#008000">//msg
=&gt; 'Hello, Current time is: '</font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">&nbsp;		</font><font color="#0000ff">if</font><font color="#000000">(
rc == UNQLITE_OK ){</font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">&nbsp;&nbsp;&nbsp;			</font><font color="#008000">//The
last formatted chunk</font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">&nbsp;&nbsp;&nbsp;			rc
= <a href="unqlite_kv_append.html">unqlite_kv_append_fmt</a>(pDb,</font><font color="#a31515">"msg"</font><font color="#000000">,-1,</font><font color="#a31515">"%d:%d:%d"</font><font color="#000000">,10,16,53);
</font><font color="#008000">//msg =&gt; 'Hello, Current time is:
10:16:53'</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000"><font face="Courier New, monospace"><font size="2">&nbsp; }</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000"><font face="Courier New, monospace"><font size="2">	}</font></font></font></p>




<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#0000ff">if</font><font color="#000000">(
rc != UNQLITE_OK ){</font></font></font></p>

<p>&nbsp; <font face="Courier New, monospace"><font size="2"><font color="#0000ff"><span lang="en-US"><span style="font-style: normal;">const</span></span></font><font color="#000000">
</font><font color="#0000ff"><span lang="en-US"><span style="font-style: normal;">char</span></span></font><font color="#000000">
</font><font color="#000000"><span lang="en-US"><span style="font-style: normal;">*zBuf;</span></span></font>
</font></font>
</p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; </font><font face="Courier New, monospace"><font size="2"><font color="#0000ff">int</font><font color="#000000">
iLen;</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; </font><font face="Courier New, monospace"><font size="2"><font color="#008000">/*
Something goes wrong, extract database error log */</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp;
<font face="Courier New, monospace"><font size="2"><a href="unqlite_config.html">unqlite_config</a>(pDb,<span style="font-weight: bold;">UNQLITE_CONFIG_ERR_LOG</span>,<span style="font-weight: bold;">&amp;zBuf</span>,<span style="font-weight: bold;">&amp;iLen</span>);</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; </font><font face="Courier New, monospace"><font size="2"><font color="#0000ff">if</font><font color="#000000">(
iLen &gt; 0 ){</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp;&nbsp;&nbsp;
<font face="Courier New, monospace"><font size="2">puts(zBuf);</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; <font face="Courier New, monospace"><font size="2">}</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; <font face="Courier New, monospace"><font size="2"><font color="#0000ff">if</font>(
rc != UNQLITE_BUSY &amp;&amp; rc != UNQLITE_NOTIMPLEMENTED ){</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp;&nbsp;&nbsp;
<font face="Courier New, monospace"><font size="2"><span style="color: green;">/* Rollback */</span><br>&nbsp; <a href="unqlite_rollback.html">unqlite_rollback</a>(pDb);</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; <font face="Courier New, monospace"><font size="2">}</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000"><font face="Courier New, monospace"><font size="2">}</font></font></font></p>

<br>
<small style="font-family: Courier New;"><span style="color: green;"></span></small><small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"></span></span></small><small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"><span style="color: green;">//Auto-commit the transaction and close our handle</span></span></span></small><br>
<small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"><a href="unqlite_close.html">unqlite_close</a>(pDb);<span style="color: green;"></span><br style="font-family: Verdana;">
</span></span></small><br>
</div>
<font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>
</b></font></font>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p><p style="margin-left: 1.25cm; font-weight: normal;">
</p>

<p style="margin-left: 1.25cm; font-weight: normal;">
</p>

<p style="margin-left: 1.25cm; font-weight: normal;"><br>
<font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: bold;"></span></font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;">
</p>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p>

<font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font></font>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>See also<br>
</b></font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<div style="margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="http://unqlite.org/db/unqlite_func_intro.c"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></a><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"> <a href="unqlite_close.html">unqlite_close</a>, <a href="unqlite_config.html">unqlite_config</a>, </span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"><a href="unqlite_kv_store.html">unqlite_kv_store</a></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">, <a href="unqlite_kv_append.html">unqlite_kv_append</a></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">, <a href="unqlite_compile.html">unqlite_compile</a>, <a href="unqlite_vm_exec.html">unqlite_vm_exec</a>, <a href="unqlite_commit.html">unqlite_commit</a>, <a href="unqlite_rollback.html">unqlite_rollback</a>.</span></font></font></font></div>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"><br>
</span></font></font></font></p>


</div>
<hr style="width: 100%; height: 2px;">
<div style="text-align: right; margin-top: 0px; height: 91px;"><small><small><a href="http://www.symisc.net/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc Systems" src="../images/symisc.png"></a></small></small>
<div style="text-align: left; margin-top: 0px; height: 14px;"><small><small style="font-family: Verdana;">Copyright © <a href="http://www.symisc.net/">Symisc Systems</a></small></small><br>
</div>
</div>
</div>

</body></html>