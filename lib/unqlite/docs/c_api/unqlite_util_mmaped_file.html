<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><head>














  
  <meta content="text/html; charset=UTF-8" http-equiv="content-type"><title>UnQLite C/C++ API Reference - Read-only memory view</title><!-- Copyright (C) 2013 Mrad Chems Eddine, Symisc Systems,http://www.symisc.net contact@symisc.net -->
  

  

  
  <link rel="stylesheet" href="symisc.css" type="text/css">

  
  <meta content="Symisc Systems - Mrad Chems Eddine &lt;chm@symisc.net&gt;" name="author">

  
  <meta content="http://unqlite.org/" name="description"></head><body>
<div style="width: 1092px;" id="main_div"><a href="http://unqlite.org/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc UnQLite" title="Symisc UnQLite" src="../images/symisc-unqlite.png"></a><br>
<div style="text-align: left; width: 1080px;" align="right">
<table style="text-align: left; width: 1075px; height: 41px;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; width: 709px; height: 45px;"><small style="color: black; font-family: Verdana;"><small><br>
An Embeddable NoSQL Database Engine<br>
      </small></small></td>
      <td style="vertical-align: top; width: 162px; height: 45px;"><br>
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="unqlite_db" data-size="large">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
      <td style="vertical-align: top; width: 176px; height: 45px;"><br>
      <a href="https://twitter.com/unqlite_db" class="twitter-follow-button" data-show-count="false" data-size="large">Follow
@unqlite_db</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
    </tr>
  </tbody>
</table>
</div>
<hr style="width: 100%; height: 2px;">
<ul id="nav">
  <li id="nav-1"><a href="../index.html">About</a></li>
  <li id="nav-8"><a href="../features.html">Distinctive Features<br>
    </a></li>
  <li id="nav-2"><a href="../intro.html">Getting Started<br>
    </a></li>
  <li id="nav-3"><a href="../c_api.html">Documentation<br>
    </a></li>
  <li id="nav-4"><a href="../downloads.html">Downloads<br>
    </a></li>
  <li id="nav-5"><a href="../licensing.html">License<br>
    </a></li>
  <li id="nav-6"><a href="../faq.html">FAQ<br>
    </a></li>
  <li id="nav-7"><a href="../support.html">Online Support<br>
    </a></li>
</ul>
<h1 style="font-family: Verdana;"><font style="font-size: 10pt;" size="2">UnQLite</font><small><small><b> C/C++ API Reference - </b></small></small><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">R</font></font><font face="Verdana, sans-serif"><font size="2">ead-only memory view</font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">.</font></font></h1>

<div><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Syntax</b></font></font><br>
<br style="font-family: Courier New;">
<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font style="font-size: 10pt;" size="2"><font color="#000000"><span style="font-family: Courier New;"><span style="color: blue;">int</span> <span style="font-weight: bold;">unqlite_util_load_mmaped_file</span>(<span style="color: blue;">const char</span> *zFile,<span style="color: blue;">void</span> **ppMap,<span style="color: blue;">unqlite_int64</span> *pFileSize);</span><br style="font-family: Courier New;">
<span style="font-family: Courier New;"><span style="color: blue;">int</span> <span style="font-weight: bold;">unqlite_util_release_mmaped_file</span>(<span style="color: blue;">void</span> *pMap,<span style="color: blue;">unqlite_int64</span> iFileSize);</span><br>
</font></font></p>


<p style="margin-left: 1.25cm; margin-bottom: 0cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font color="#000000"><br>
</font></font></font></p>
<p style="margin-bottom: 0cm; margin-left: 40px;" lang="en-US"><font face="Verdana, sans-serif"><font size="2">Obtain
a read-only memory view of the target file.</font></font></p>


<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"></font></font></p>
<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Description</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>

<p style="margin-bottom: 0cm; margin-left: 40px;" lang="en-US"><font face="Verdana, sans-serif"><font size="2">The
</font></font><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: bold;"><span style="font-family: Courier New;">unqlite_util_load_mmaped_file()</span> </span></font></font><font face="Verdana, sans-serif"><font size="2">interface is used to obtain a <span style="font-weight: bold;">read-only</span> memory view of the whole
target file. This is very useful especially if you want to store files
perhaps some configurations inside your UnQLite database (See example
below). On
success, the memory view is stored in <span style="font-style: italic;">ppAddr</span> and the file
size in bytes is stored in <span style="font-style: italic;">pFileSize</span>.</font></font></p>


<p style="margin-bottom: 0cm; margin-left: 40px;" lang="en-US"><font face="Verdana, sans-serif"><font size="2"><br>
</font></font></p>
<p style="margin-bottom: 0cm; margin-left: 40px;" lang="en-US"><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: bold;"><span style="font-family: Courier New;">unqlite_util_release_mmaped_file()</span> </span></font></font><font face="Verdana, sans-serif"><font size="2">release
the memory view of the target file after successful return from </font></font><font style="font-family: Courier New;" face="Verdana, sans-serif"><font size="2"><span style="font-weight: bold;">unqlite_util_load_mmaped_file()</span></font></font><font face="Verdana, sans-serif"><font size="2">.</font></font></p>
<p style="margin-bottom: 0cm; margin-left: 40px;" lang="en-US"> 
</p>

<p style="margin-bottom: 0cm;" lang="en-US"> </p>

<p style="margin-bottom: 0cm;" lang="en-US">
</p>
<br>
<font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Parameters</b></font></font>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>

<table style="width: 100%;" id="table_code" border="1" bordercolor="#000000" cellpadding="2" cellspacing="0">

  <colgroup><col width="73*"> <col width="183*"> </colgroup><tbody><tr valign="top"><td width="28%">
      <span style="font-weight: bold;"></span>
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>zFile</b></font></font></font></div>
</td>
      <td width="72%">
      <p style="margin-bottom: 0cm;" lang="en-US"><font face="Verdana, sans-serif"><font size="2">Relative
or real path to the target file.</font></font></p>



      </td>
    </tr><tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>ppMap</b></font></font></font></div>
      </td>
      <td style="vertical-align: top;">
      <p style="margin-bottom: 0cm;" lang="en-US"><font face="Verdana, sans-serif"><font size="2"><i>OUT:</i>
Read-only memory view of the whole file.</font></font></p>


      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>pFileSize</b></font></font></font></div>
      </td>
      <td style="vertical-align: top;">
      <p style="margin-bottom: 0cm;" lang="en-US"><font face="Verdana, sans-serif"><font size="2"><i>OUT:</i>
Size in bytes of the target file.</font></font></p>


      </td>
    </tr>

  </tbody>
</table>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Return
value</b></font></font></p>
<p style="margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p style="margin-bottom: 0cm; margin-left: 40px;" lang="en-US"><font face="Verdana, sans-serif"><font size="2"><font style="font-size: 10pt;" size="2"><span style="font-weight: bold; font-family: Courier New;">UNQLITE_OK</span> </font>is
returned on success with a read-only memory view of the whole file
stored in <span style="font-style: italic;">ppAddr</span> (Second argument) and the size of the target
file in bytes stored in <span style="font-style: italic;">pFileSize</span> (Third argument</font></font><font face="Verdana, sans-serif"><font size="2"><span style="font-weight: bold;"></span></font></font><font face="Verdana, sans-serif"><font size="2">). Any other
return value indicates failure.</font></font></p>


<p style="margin-left: 1.25cm; font-weight: normal;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Example</b></font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="http://unqlite.org/db/unqlite_tar.c">Compile this C file</a> for a smart introduction to these interfaces.</font></font></font></p>
<p style="margin-left: 1.25cm; font-weight: normal;"><small style="font-family: Courier New;"><span style="color: green;"></span></small><br>
</p>
<div style="text-align: left; margin-left: 68px; width: 550px;" id="code"><small style="font-family: Courier New;"><span style="color: blue;">#include <span style="color: red;">&lt;unqlite.h&gt;</span></span></small><small style="font-family: Courier New;"><span style="color: blue;"><br>
<br>
void</span> *pMap;<br>
<span style="color: blue;">unqlite_int64</span> iSize;<br>
<span style="color: blue;">int</span> rc;<br>
<span style="color: blue;">unqlite</span> *pDb;<br>
<br>
</small><small style="font-family: Courier New;"><span style="color: green;">// Open our database;</span></small><br style="font-family: Courier New;">
<small><span style="font-family: Courier New;">rc = <a href="unqlite_open.html">unqlite_open</a>(&amp;pDb,<span style="color: red;">"test.db"</span>,UNQLITE_OPEN_CREATE);<br>
<span style="color: blue;">if</span>( rc != UNQLITE_OK ){ <span style="color: blue;">return</span>; }<br>
</span></small><small style="font-family: Courier New;"><span style="color: green;"><br>
// Obtain a read-only memory view of the target file;<br>
<span style="color: black;">rc = <span style="font-weight: bold;">unqlite_util_load_mmaped_file</span>(<span style="color: red;">"target.xml"</span>,<span style="font-weight: bold;">&amp;pMap</span>,<span style="font-weight: bold;">&amp;iSize</span>);<br>
<span style="color: blue;">if</span>( rc != UNQLITE_OK ){ <span style="color: blue;">return</span>; }<br>
<br>
</span></span></small><small style="font-family: Courier New;"><span style="color: green;">// Store the whole file in our database;</span></small><br>
<small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;">rc = <a href="unqlite_kv_store.html">unqlite_kv_store</a>(pDb,<span style="color: red;">"target.xml"</span>,-1,<span style="font-weight: bold;">pMap</span>,<span style="font-weight: bold;">iSize</span>);<br>
<span style="color: blue;">if</span>( rc != UNQLITE_OK ){ <span style="color: blue;">return</span>; }<br>
<br>
</span></span></small><small style="font-family: Courier New;"><span style="color: green;">// Discard the memory view;</span></small><br><small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"><span style="font-weight: bold;">unqlite_util_release_mmaped_file</span>(<span style="color: red;"></span><span style="font-weight: bold;">pMap</span>,<span style="font-weight: bold;">iSize</span>);<br>
<span style="color: blue;"></span> <span style="color: blue;"></span><br>
</span></span></small><small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"><span style="color: green;">//Auto-commit the transaction and close our handle</span></span></span></small><br>
<small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"><a href="unqlite_close.html">unqlite_close</a>(pDb);<span style="color: green;"></span><br style="font-family: Verdana;">
</span></span></small><br>
</div>




<p style="margin-left: 1.25cm; font-weight: normal;">
</p>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p>

<font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font></font>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>See also<br>
</b></font></font></p>


<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>


<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="http://unqlite.org/db/unqlite_func_intro.c"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></a><a href="unqlite_util_random.html"><font face="Verdana, sans-serif"><span style="font-weight: normal;">unqlite_util_random_string</span></font></a></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">.<br>
</span></font></font></font></p>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"><br>
</span></font></font></font></p>


</div>
<hr style="width: 100%; height: 2px;">
<div style="text-align: right; margin-top: 0px; height: 91px;"><small><small><a href="http://www.symisc.net/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc Systems" src="../images/symisc.png"></a></small></small>
<div style="text-align: left; margin-top: 0px; height: 14px;"><small><small style="font-family: Verdana;">Copyright © <a href="http://www.symisc.net/">Symisc Systems</a></small></small><br>
</div>
</div>
</div>

</body></html>