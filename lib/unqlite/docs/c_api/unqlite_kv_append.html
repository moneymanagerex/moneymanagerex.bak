<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><head>





















  
  <meta content="text/html; charset=UTF-8" http-equiv="content-type"><title>UnQLite C/C++ API Reference - Writing Data to the Database</title><!-- Copyright (C) 2013 Mrad Chems Eddine, Symisc Systems,http://www.symisc.net contact@symisc.net -->
  

  

  
  <link rel="stylesheet" href="symisc.css" type="text/css">

  
  <meta content="Symisc Systems - Mrad Chems Eddine &lt;chm@symisc.net&gt;" name="author">

  
  <meta content="http://unqlite.org/" name="description"></head><body>
<div style="width: 1092px;" id="main_div"><a href="http://unqlite.org/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc UnQLite" title="Symisc UnQLite" src="../images/symisc-unqlite.png"></a><br>
<div style="text-align: left; width: 1080px;" align="right">
<table style="text-align: left; width: 1075px; height: 41px;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; width: 709px; height: 45px;"><small style="color: black; font-family: Verdana;"><small><br>
An Embeddable NoSQL Database Engine<br>
      </small></small></td>
      <td style="vertical-align: top; width: 162px; height: 45px;"><br>
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="unqlite_db" data-size="large">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
      <td style="vertical-align: top; width: 176px; height: 45px;"><br>
      <a href="https://twitter.com/unqlite_db" class="twitter-follow-button" data-show-count="false" data-size="large">Follow
@unqlite_db</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
    </tr>
  </tbody>
</table>
</div>
<hr style="width: 100%; height: 2px;">
<ul id="nav">
  <li id="nav-1"><a href="../index.html">About</a></li>
  <li id="nav-8"><a href="../features.html">Distinctive Features<br>
    </a></li>
  <li id="nav-2"><a href="../intro.html">Getting Started<br>
    </a></li>
  <li id="nav-3"><a href="../c_api.html">Documentation<br>
    </a></li>
  <li id="nav-4"><a href="../downloads.html">Downloads<br>
    </a></li>
  <li id="nav-5"><a href="../licensing.html">License<br>
    </a></li>
  <li id="nav-6"><a href="../faq.html">FAQ<br>
    </a></li>
  <li id="nav-7"><a href="../support.html">Online Support<br>
    </a></li>
</ul>
<h1 style="font-family: Verdana;"><font style="font-size: 10pt;" size="2">UnQLite</font><small><small><b> C/C++ API Reference - Writing Data to the Database</b></small></small><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">.</font></font></h1>


<div><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Syntax</b></font></font><br>
<br>
<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;">
</p>



<div style="margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font color="#000000"><span style="font-family: Courier New;"><span style="color: blue;">int</span> <span style="font-weight: bold;">unqlite_kv_append</span>(<span style="color: blue;">unqlite</span> *pDb,<span style="color: blue;">const</span> <span style="color: blue;">void</span> *pKey,<span style="color: blue;">int</span> nKeyLen,<span style="color: blue;">const</span> <span style="color: blue;">void</span> *pData,<span style="color: blue;">unqlite_int64</span> nDataLen);</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">
<span style="color: blue;">int</span> <span style="font-weight: bold;">unqlite_kv_append_fmt</span>(<span style="color: blue;">unqlite</span> *pDb,<span style="color: blue;">const</span> <span style="color: blue;">void</span> *pKey,<span style="color: blue;">int</span> nKeyLen,<span style="color: blue;">const</span> <span style="color: blue;">char</span> *zFormat,...);</span><br>
</font></font></font></div>

<p style="margin-bottom: 0cm; margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;"><br>
</span></span></span></font></font></font></p>
<p style="margin-bottom: 0cm; margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">Append data to a database record.</span></span></span></font></font></font></p>

<p style="margin-bottom: 0cm; margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;"><br>
</span></span></span></font></font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Description</b></font></font></p>
<span style="font-weight: bold;"><br>
</span>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 11pt;" size="2"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;"></span></font></font><a href="unqlite_compile.html"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;"></span></font></font></a><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;"> </span></font></font></font></font>
</p>
<p style="margin-bottom: 0cm; margin-left: 40px;">
</p>
<div style="margin-left: 40px;"><font face="Verdana, sans-serif"><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;">Write
a new record into the database. If the record does not exists, it is
created. Otherwise, the new data chunk is appended
to the end of the old chunk. You can switch to  <a href="unqlite_kv_store.html"><span style="font-family: Courier New;">unqlite_kv_store()</span></a> for an overwrite
operation. </span></span></font></font></font></div>
<p style="margin-bottom: 0cm; font-weight: normal;">
</p>

<br>
<p style="margin-bottom: 0cm; margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font color="#000000"><span style="font-family: Courier New;"><span style="font-weight: bold;">unqlite_kv_append_fmt() </span></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font color="#000000"><span style="font-weight: normal;">is a </span></font><font color="#000000"><span style="font-weight: normal;">work-alike
of the "printf()" family of functions from the standard C
library which is used to append a small formatted string.<br>
</span></font></font></font></p>
<p style="margin-bottom: 0cm; margin-left: 40px;"><br>
<font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;"><a style="font-family: Courier New;" href="unqlite_kv_cursor.html"></a></span></span></span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;"></span></span></span></font></font></font></p>
<p style="margin-bottom: 0cm; margin-left: 40px;">
</p>
<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;">Records
are stored in the database using whatever organization is required by
the underlying Key/Value (KV) storage engine. In some cases such as
B+Tree, R+Tree, records are stored in a sort order that you may want
to define your own comparison function or hash function for the
<span style="font-weight: bold;">Hash </span>(Default) KV store (either in-memory or disk based). All of these options
can be set via <a href="unqlite_kv_config.html"><span style="font-family: Courier New;">unqlite_kv_config()</span></a>.</span></span></font></font></font></p>




<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-style: normal;"><span style="font-weight: normal;"><br>
</span></span></font></font></font></p>




<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Parameters</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<table style="width: 100%;" id="table_code" border="1" bordercolor="#000000" cellpadding="2" cellspacing="0"><tbody><tr valign="top"><td width="28%"><span style="font-weight: bold;"></span>
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>pDb</b></font></font></font></div>
</td>
      <td width="72%">
      <p> <font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">A pointer to a unQLite <a href="unqlite_open.html">Database Handle</a>.</font></font></p>
      </td>
    </tr><tr><td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>pKey</b></font></font></font></div>
</td>
      <td style="vertical-align: top;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;">Record key.</span></span></font></font></font>
      </td>
    </tr>
    <tr><td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>nKeyLen</b></font></font></font></div>
</td>
      <td style="vertical-align: top;">
      <p style="font-weight: normal;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;"><span style="font-style: italic; font-weight: bold;">pKey</span> length. If the nKeyLen argument is less than zero, then <span style="font-style: italic; font-weight: bold;">pKey</span> is
read up to the first zero terminator. If nKeyLen is non-negative, then
it is the maximum number of bytes read from </span></span></font></font></font><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;"><span style="font-style: italic; font-weight: bold;">pKey</span></span></span></font></font></font><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;">. </span></span></font></font></font>
      </p>

</td>
    </tr><tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>pData</b></font></font></font></div>
      </td>
      <td style="vertical-align: top;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;">Record data.</span></span></font></font></font></td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>nDataLen</b></font></font></font></div>
      </td>
      <td style="vertical-align: top;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;">Data length (64-bit integer).<br>
</span></span></font></font></font></td>
    </tr>


    
  </tbody>
</table>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Return
value</b></font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
<b></b></font></font></p>
<div style="margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b style="font-family: Courier New;">UNQLITE_OK</b>
is returned on success. Any other return value indicates failure such as:</font></font></div>

<p style="margin-left: 1.25cm; font-weight: normal;">
</p>
<p style="font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;"><b></b></span></span></font></font></font></p><p style="font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font size="2"><font color="#000000"><span lang="en-US"><span style="font-style: normal;"><br>
</span></span></font></font></font></p>

<p style="font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font size="2"><font style="font-family: Courier New;" color="#000000"><span lang="en-US"><span style="font-style: normal;"><b>UNQLITE_BUSY</b></span></span></font><font color="#000000"><span lang="en-US"><span style="font-style: normal;">:
Another thread or process have a reserved or exclusive lock on the
database. In which case, the caller should wait until the lock holder
relinquish it.</span></span></font></font></font></p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><b><br>
</b></span></span></font></font></font></p>
<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-family: Courier New;" color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><b>UNQLITE_READ_ONLY</b></span></span></font></font><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;">:
Read-only Key/Value storage engine.</span></span></font></font></font></p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><br>
</p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-family: Courier New;" color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><b>UNQLITE_NOTIMPLEMENTED</b></span></span></font></font><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;">: The underlying KV storage engine does not implement the xAppend() method.</span></span></font></font></font></p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><br>
</p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-family: Courier New;" color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><b>UNQLITE_PERM</b></span></span></font></font><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;">:
Permission error.</span></span></font></font></font></p>

<p style="margin-bottom: 0cm; margin-left: 40px;"><br>
</p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-family: Courier New;" color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><b>UNQLITE_LIMIT</b></span></span></font></font><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;">:
Journal file record limit reached (An unlikely scenario).</span></span></font></font></font></p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><br>
</p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-family: Courier New;" color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><b>UNQLITE_IOERR</b></span></span></font></font><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;">:
OS specific error. This error is considered harmful and you should
perform an immediate rollback via </span></span></font></font></font><font style="font-family: Courier New;" face="Verdana, sans-serif"><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><a href="unqlite_rollback.html">unqlite_rollback()</a></span></span></font></font></font><font face="Verdana, sans-serif"><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;">.</span></span></font></font></font></p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><br>
</p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-family: Courier New;" color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><b>UNQLITE_NOMEM</b></span></span></font></font><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;">:
Out of memory (Unlikely scenario). This error is considered
harmful and you should perform an immediate rollback via
<a style="font-family: Courier New;" href="unqlite_rollback.html">unqlite_rollback()</a>.</span></span></font></font></font></p>

<p style="margin-bottom: 0cm; font-weight: normal; margin-left: 40px;"><br>
</p>

<p style="margin-bottom: 0cm; margin-left: 40px;"><font face="Verdana, sans-serif"><font color="#000000"><font size="2"><span lang="en-US"><span style="font-style: normal;"><span style="font-weight: normal;">For
a human-readable error message, you can extract the database error
log via <a style="font-family: Courier New;" href="unqlite_config.html">unqlite_config()</a> with a configuration verb set to
</span></span></span></font></font><font style="font-weight: bold;" color="#000000"><font face="Courier New, monospace"><font size="2"><span lang="en-US"><span style="font-style: normal;">UNQLITE_CONFIG_ERR_LOG</span></span></font></font></font><font color="#000000"><font face="Consolas, sans-serif"><font style="font-size: 9pt;" size="2"><span lang="en-US"><span style="font-style: normal;">.</span></span></font></font></font></font></p>

<font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
Example<br>
<br>
</b></font></font>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="http://unqlite.org/db/unqlite_kv_intro.c"><font face="Verdana, sans-serif"><span style="font-weight: normal;">Compile this C file</span></font></a><font face="Verdana, sans-serif"><span style="font-weight: normal;">
for a smart introduction to these interface.</span></font></font></font></p>
<font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>
<br>
</b></font></font>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p>

<div style="text-align: left; margin-left: 68px; width: 874px;" id="code"><small style="font-family: Courier New;"><span style="color: blue;">#include <span style="color: red;">&lt;unqlite.h&gt;<br>
<br>
</span></span></small><small style="font-family: Courier New;"><span style="color: blue;">int</span> rc;<br>
<span style="color: blue;">unqlite</span> *pDb;<br><span style="color: blue;"></span><br>
</small><small style="font-family: Courier New;"><span style="color: green;">// Open our database;</span></small><br style="font-family: Courier New;">
<small><span style="font-family: Courier New;">rc = <a href="unqlite_open.html">unqlite_open</a>(&amp;pDb,<span style="color: red;">"test.db"</span>,UNQLITE_OPEN_CREATE);<br>
<span style="color: blue;">if</span>( rc != UNQLITE_OK ){ <span style="color: blue;">return</span>; }<br>
</span></small><small style="font-family: Courier New;"><span style="color: green;"><br></span></small><small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"> </span></span></small><small style="font-family: Courier New;"><span style="color: green;">//First data chunk . </span></small><small style="font-family: Courier New;"><span style="color: green;"></span></small><br>
<p style="margin-bottom: 0cm; font-style: normal; font-weight: normal;" lang="en-US">
<font color="#000000"><font face="Verdana, sans-serif"><font size="2"><font face="Courier New, monospace">rc
= <span style="font-weight: bold;">unqlite_kv_append</span>(pDb,</font><font color="#a31515"><font face="Courier New, monospace">"msg"</font></font><font face="Courier New, monospace">,-1,</font><font color="#a31515"><font face="Courier New, monospace">"Hello,
"</font></font><font face="Courier New, monospace">,7); </font><font color="#008000"><font face="Courier New, monospace">//msg
=&gt; 'Hello, '</font></font></font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">	</font><font color="#0000ff">if</font><font color="#000000">(
rc == UNQLITE_OK ){</font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">&nbsp;		</font><font color="#008000">//The second chunk</font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">&nbsp;		rc
= <span style="font-weight: bold;">unqlite_kv_append</span>(pDb,</font><font color="#a31515">"msg"</font><font color="#000000">,-1,</font><font color="#a31515">"Current
time is: "</font><font color="#000000">,17); </font><font color="#008000">//msg
=&gt; 'Hello, Current time is: '</font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">&nbsp;		</font><font color="#0000ff">if</font><font color="#000000">(
rc == UNQLITE_OK ){</font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">&nbsp;&nbsp;&nbsp;			</font><font color="#008000">//The
last formatted chunk</font></font></font></p>

<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#000000">&nbsp;&nbsp;&nbsp;			rc
= <span style="font-weight: bold;">unqlite_kv_append_fmt</span>(pDb,</font><font color="#a31515">"msg"</font><font color="#000000">,-1,</font><font color="#a31515">"%d:%d:%d"</font><font color="#000000">,10,16,53);
</font><font color="#008000">//msg =&gt; 'Hello, Current time is:
10:16:53'</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000"><font face="Courier New, monospace"><font size="2">&nbsp; }</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000"><font face="Courier New, monospace"><font size="2">	}</font></font></font></p>

<br>


<p style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2"><font color="#0000ff">if</font><font color="#000000">(
rc != UNQLITE_OK ){</font></font></font></p>

<p>&nbsp; <font face="Courier New, monospace"><font size="2"><font color="#0000ff"><span lang="en-US"><span style="font-style: normal;">const</span></span></font><font color="#000000">
</font><font color="#0000ff"><span lang="en-US"><span style="font-style: normal;">char</span></span></font><font color="#000000">
</font><font color="#000000"><span lang="en-US"><span style="font-style: normal;">*zBuf;</span></span></font>
</font></font>
</p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; </font><font face="Courier New, monospace"><font size="2"><font color="#0000ff">int</font><font color="#000000">
iLen;</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; </font><font face="Courier New, monospace"><font size="2"><font color="#008000">/*
Something goes wrong, extract database error log */</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp;
<font face="Courier New, monospace"><font size="2"><a href="unqlite_config.html">unqlite_config</a>(pDb,<span style="font-weight: bold;">UNQLITE_CONFIG_ERR_LOG</span>,<span style="font-weight: bold;">&amp;zBuf</span>,<span style="font-weight: bold;">&amp;iLen</span>);</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; </font><font face="Courier New, monospace"><font size="2"><font color="#0000ff">if</font><font color="#000000">(
iLen &gt; 0 ){</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp;&nbsp;&nbsp;
<font face="Courier New, monospace"><font size="2">puts(zBuf);</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; <font face="Courier New, monospace"><font size="2">}</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; <font face="Courier New, monospace"><font size="2"><font color="#0000ff">if</font>(
rc != UNQLITE_BUSY &amp;&amp; rc != UNQLITE_NOTIMPLEMENTED ){</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp;&nbsp;&nbsp;
<font face="Courier New, monospace"><font size="2"><span style="color: green;">/* Rollback */</span><br>&nbsp; <a href="unqlite_rollback.html">unqlite_rollback</a>(pDb);</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000">&nbsp; <font face="Courier New, monospace"><font size="2">}</font></font></font></p>

<p style="margin-bottom: 0cm;"><font color="#000000"><font face="Courier New, monospace"><font size="2">}</font></font></font></p>

<br>
<small style="font-family: Courier New;"><span style="color: green;"></span></small><small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"></span></span></small><small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"><span style="color: green;">//Auto-commit the transaction and close our handle</span></span></span></small><br>
<small style="font-family: Courier New;"><span style="color: green;"><span style="color: black;"><a href="unqlite_close.html">unqlite_close</a>(pDb);<span style="color: green;"></span><br style="font-family: Verdana;">
</span></span></small><br>
</div>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p>

<p style="margin-left: 1.25cm; font-weight: normal;">
</p>

<p style="margin-left: 1.25cm; font-weight: normal;"><br>
<font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: bold;"></span></font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;">
</p>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p>

<font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font></font>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>See also<br>
</b></font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<div style="margin-left: 40px;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="http://unqlite.org/db/unqlite_func_intro.c"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></a><font face="Verdana, sans-serif"><span style="font-weight: normal;"><a href="unqlite_kv_fetch.html">unqlite_kv_fetch</a></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">, <a href="unqlite_kv_fetch_callback.html">unqlite_kv_fetch_callback</a>, <a href="unqlite_kv_store.html">unqlite_kv_store</a>, <a href="unqlite_open.html">unqlite_open</a>, <a href="unqlite_close.html">unqlite_close</a>, <a href="unqlite_config.html">unqlite_config</a>.</span></font></font></font></div>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"><br>
</span></font></font></font></p>


</div>
<hr style="width: 100%; height: 2px;">
<div style="text-align: right; margin-top: 0px; height: 91px;"><small><small><a href="http://www.symisc.net/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc Systems" src="../images/symisc.png"></a></small></small>
<div style="text-align: left; margin-top: 0px; height: 14px;"><small><small style="font-family: Verdana;">Copyright © <a href="http://www.symisc.net/">Symisc Systems</a></small></small><br>
</div>
</div>
</div>

</body></html>