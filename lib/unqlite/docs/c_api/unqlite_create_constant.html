<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><head>











  
  <meta content="text/html; charset=UTF-8" http-equiv="content-type"><title>UnQLite C/C++ API Reference - Constant Expansion Mechanism</title><!-- Copyright (C) 2013 Mrad Chems Eddine, Symisc Systems,http://www.symisc.net contact@symisc.net -->
  

  

  
  <link rel="stylesheet" href="symisc.css" type="text/css">

  
  <meta content="Symisc Systems &lt;chm@symisc.net&gt;" name="author">

  
  <meta content="http://unqlite.org/" name="description"></head><body>
<div style="width: 1092px;" id="main_div"><a href="http://unqlite.org/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc UnQLite" title="Symisc UnQLite" src="../images/symisc-unqlite.png"></a><br>
<div style="text-align: left; width: 1080px;" align="right">
<table style="text-align: left; width: 1075px; height: 41px;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; width: 709px; height: 45px;"><small style="color: black; font-family: Verdana;"><small><br>
An Embeddable NoSQL Database Engine<br>
      </small></small></td>
      <td style="vertical-align: top; width: 162px; height: 45px;"><br>
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="unqlite_db" data-size="large">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
      <td style="vertical-align: top; width: 176px; height: 45px;"><br>
      <a href="https://twitter.com/unqlite_db" class="twitter-follow-button" data-show-count="false" data-size="large">Follow
@unqlite_db</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></td>
    </tr>
  </tbody>
</table>
</div>
<hr style="width: 100%; height: 2px;">
<ul id="nav">
  <li id="nav-1"><a href="../index.html">About</a></li>
  <li id="nav-8"><a href="../features.html">Distinctive Features<br>
    </a></li>
  <li id="nav-2"><a href="../intro.html">Getting Started<br>
    </a></li>
  <li id="nav-3"><a href="../c_api.html">Documentation<br>
    </a></li>
  <li id="nav-4"><a href="../downloads.html">Downloads<br>
    </a></li>
  <li id="nav-5"><a href="../licensing.html">License<br>
    </a></li>
  <li id="nav-6"><a href="../faq.html">FAQ<br>
    </a></li>
  <li id="nav-7"><a href="../support.html">Online Support<br>
    </a></li>
</ul>
<h1 style="font-family: Verdana;"><font style="font-size: 10pt;" size="2">UnQLite</font><small><small><b> C/C++ API Reference - </b></small></small><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">Constant
Expansion Mechanism</font></font><font><font><b><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>.</b></font></font></b></font></font></h1>

<div><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Syntax</b></font></font><br>
<br>
<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font style="font-size: 10pt;" size="2"><font color="#0000ff">int</font><font color="#000000"> <span style="font-weight: bold;">unqite_create_constant</span>(</font></font></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font color="#000000">&nbsp;&nbsp;&nbsp; </font><font style="font-size: 10pt;" size="2"><font color="#0000ff">unqlite_vm</font><font color="#000000">
*pVm,</font></font></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font color="#000000">&nbsp;&nbsp;&nbsp; </font><font style="font-size: 10pt;" size="2"><font color="#0000ff">const</font><font color="#000000">
</font><font color="#0000ff">char</font><font color="#000000">
*zName,</font></font></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font color="#000000">&nbsp;&nbsp;&nbsp; </font><font style="font-size: 10pt;" size="2"><font color="#0000ff">void</font><font color="#000000">
(*xExpand)(</font><font color="#0000ff">unqlite_value</font><font color="#000000">
*pValue,</font><font color="#0000ff">void</font><font color="#000000">
*pUserData),</font></font></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font color="#000000">&nbsp;&nbsp;&nbsp; </font><font style="font-size: 10pt;" size="2"><font color="#0000ff">void</font><font color="#000000">
*pUserData</font></font></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><font color="#000000"><font style="font-size: 10pt;" size="2">);</font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">Constant
Expansion Mechanism - Expand a constant to the desired value via user
installable callbacks.</font></font></p>
<p style="margin-left: 0.2cm; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><br>
</font></font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Description</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p style="margin-left: 1.25cm; font-style: normal; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-weight: normal;">This
routine </span><span style="font-style: normal;"><span style="font-weight: normal;">is used to register constants
</span></span><span style="font-style: normal;"><span style="font-weight: normal;">which
are expanded later to the desired value when invoked from the running <a href="../jx9.html">Jx9</a> </span></span><span style="font-style: normal;"><span style="font-weight: normal;">script. </span></span>The
constant expansion mechanism under UnQLite is extremely powerful yet
simple and work as follows:</font></font></p>

<p style="margin-left: 1.25cm; font-style: normal; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></p>


<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-style: normal;"><span style="font-weight: normal;">Each
registered constant have a C procedure associated with it. This
procedure </span></span><span style="font-style: normal;"><span style="font-weight: normal;">known
as the constant expansion callback is responsible of expanding the
invoked constant to the desired value. For example the C procedure
associated with the </span></span><span style="font-style: normal;"><b>“__PI__”</b></span><span style="font-style: normal;"><span style="font-weight: normal;">
constant expands to </span></span><span style="font-style: normal;"><b>3.14</b></span><span style="font-style: normal;"><span style="font-weight: normal;">
(the value of PI), the </span></span><span style="font-style: normal;"><b>“__OS__”
</b></span><span style="font-style: normal;"><span style="font-weight: normal;">constant
</span></span><span style="font-style: normal;"><span style="font-weight: normal;">expands
to the name of the host Operating System (Windows, Linux) and so
on.</span></span></font></font></p>

<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-style: normal;"><span style="font-weight: normal;"><br>
</span></span></font></font></p>

<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-style: normal;"><span style="font-weight: normal;">The
third and most important parameter this function takes is an application-defined procedure responsible of expanding the
constant to the desired value. This procedure must accept two
arguments. The first argument is a pointer to a </span></span></font></font><a style="font-family: Courier New;" href="../c_api_object.html#unqlite_value"><font style="font-size: 10pt;" size="2"><span style="font-style: normal;"><span style="font-weight: normal;">unqlite_value</span></span></font></a><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-style: normal;"><span style="font-weight: normal;">
that the procedure must fill with the desired value for example 3.14
(value of PI) is stored in this pointer. Use the following interfaces
to populate th</span></span></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-style: normal;"><span style="font-weight: normal;">is object</span></span></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><span style="font-style: normal;"><span style="font-weight: normal;">
with the desired value: </span></span></font></font>
</p>


<p style="margin-left: 1.25cm; margin-bottom: 0cm;"><a href="../../../jx9/website/c_api_func.html#Populating_Dynamically_Typed_Value_Object"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></a></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><a href="unqlite_value_fill.html"><font style="font-size: 10pt;" size="2">unqlite_value_int()</font></a></p>


<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><a href="unqlite_value_fill.html"><font style="font-size: 10pt;" size="2">unqlite_value_int64()</font></a></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><a href="unqlite_value_fill.html"><font style="font-size: 10pt;" size="2">unqlite_value_bool()</font></a></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><a href="unqlite_value_fill.html"><font style="font-size: 10pt;" size="2">unqlite_value_null()</font></a></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><a href="unqlite_value_fill.html"><font style="font-size: 10pt;" size="2">unqlite_value_double()</font></a></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><a href="unqlite_value_fill.html"><font style="font-size: 10pt;" size="2">unqlite_value_string()</font></a></p>

<p style="margin-left: 1.25cm; margin-bottom: 0cm; font-family: Courier New;"><a href="unqlite_value_fill.html"><font style="font-size: 10pt;" size="2">unqlite_value_string_format()</font></a></p>

<p style="margin-left: 1.25cm; font-family: Courier New;"><font style="font-size: 10pt;" size="2"><a href="unqlite_value_fill.html"><span style="font-style: normal;"><span style="font-weight: normal;">unqlite_value_resource()</span></span></a></font></p>

<p style="margin-left: 1.25cm; font-style: normal; font-weight: normal;">
<font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></p>

<p style="margin-left: 1.25cm; font-style: normal; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">The
second argument is a copy of the fourth argument to this
function which is forwarded verbatim by engine.</font></font></p>
<p style="margin-left: 1.25cm; font-style: normal; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></p>


<p style="margin-left: 1.25cm; font-style: normal; font-weight: normal;">
<font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">Built-in
constants may be overloaded by new application-defined constants.
Note that <a href="../jx9.html">Jx9</a> is shipped with more than 142 <a href="../jx9_builtin.html#const">built-in constants</a> installed
using exactly this interface.</font></font></p>

<p style="margin-left: 1.25cm; font-style: normal; font-weight: normal;">
<font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><br>
</font></font></p>

<p style="margin-left: 1.25cm; font-style: normal; font-weight: normal;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">A
valid constant name starts with a letter or underscore, followed by
any number of letters, numbers or underscores. Also note that
constants names are case-sensitive. </font></font>
</p>


<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-style: normal;"><span style="font-weight: normal;"><br>
</span></span></font></font></font></p>

<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-style: normal;"><span style="font-weight: normal;">This
function must be called </span></span></font><font face="Verdana, sans-serif"><span style="font-style: normal;"><span style="font-weight: normal;">before Jx9 program execution via </span></span></font><a style="font-family: Courier New;" href="unqlite_vm_exec.html"><span style="font-style: normal;"><span style="font-weight: normal;">unqlite_vm_exec()</span></span></a><font face="Verdana, sans-serif"><span style="font-style: normal;"><span style="font-weight: normal;">.</span></span></font></font></font></p>


<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-style: normal;"><span style="font-weight: normal;"><br>
</span></span></font></font></font></p>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-style: normal;"><span style="font-weight: normal;">You
can refer to the </span></span></font><a href="../const_intro.html"><font face="Verdana, sans-serif"><span style="font-style: normal;"><span style="font-weight: normal;">following
guide</span></span></font></a><font face="Verdana, sans-serif"><span style="font-style: normal;"><span style="font-weight: normal;">
for an introductory course to this interface and the constant
expansion mechanism in general.</span></span></font></font></font></p>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">&nbsp;<br>
</span></font></font></font></p>



<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Parameters</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>

<table style="width: 1092px; height: 72px;" id="table_code" border="1" bordercolor="#000000" cellpadding="2" cellspacing="0">

  <colgroup><col width="73*"> <col width="183*"> </colgroup><tbody>
    <tr valign="top">
      <td width="28%">
      
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>pVm</b></font></font></font></div>
</td>
      <td width="72%">
      
      
      <p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">A pointer to a UnQLite <a href="../c_api_object.html#unqlite_vm">Virtual Machine</a>.</font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">
      </font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"></font></font></p>
      </td>
    </tr><tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>zName</b></font></font></font></div>
      </td>
      <td style="vertical-align: top;">
      <p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">A pointer to a null terminated string holding the name of the
constant to be expanded for example <b>__PI__</b>, <b>__OS__</b>,<b> __EOL__</b>.</font></font></p>
</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>xExpand</b></font></font></font></div>
      </td>
      <td style="vertical-align: top;">
      <p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">Host-application defined procedure responsible of expanding
the constant to the desired value.</font></font></p>
      </td>
    </tr>
<tr>
      <td style="vertical-align: top;">
      <div style="margin-left: 40px;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>pUserDara</b></font></font></font></div>
      </td>
      <td style="vertical-align: top;">
      
      <p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">Arbitrary user pointer which is forwarded verbatim by the
engine to the callback as its second argument.</font></font></p>

      </td>
    </tr>

  </tbody>
</table>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Return
value</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;"><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><span style="font-family: Courier New;">UNQLITE_OK</span> </b>is returned<b> </b>on success. Any other return value
</font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">typically (<b style="font-family: Courier New;">UNQLITE_NOMEM</b>) </font></font><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2">indicates failure</font></font></font></p>

<p style="margin-left: 1.25cm; font-weight: normal;">
</p>
<p style="margin-left: 1.25cm; font-weight: normal;">
</p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>Example</b></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>

<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="http://unqlite.org/db/unqlite_const_intro.c"><font face="Verdana, sans-serif"><span style="font-weight: normal;">Compile this C file</span></font></a><font face="Verdana, sans-serif"><span style="font-weight: normal;">
for a smart introduction to this </span></font></font></font><font color="#000000"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">interface</span></font></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">.</span></font></font></font></p>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"><br>
</span></font></font></font></p>
<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b>See also<br>
</b></font></font></p>

<p><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><b><br>
</b></font></font></p>


<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><a href="http://unqlite.org/db/unqlite_func_intro.c"><font face="Verdana, sans-serif"><span style="font-weight: normal;"></span></font></a><font face="Verdana, sans-serif"><span style="font-weight: normal;"><a href="unqlite_create_function.html">unqlite_create_function</a>, <a href="unqlite_delete_constant.html">unqlite_delete_constant</a></span></font></font></font><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;">.<br>
</span></font></font></font></p>
<p style="margin-left: 1.25cm;"><font face="Verdana, sans-serif"><font style="font-size: 10pt;" size="2"><font face="Verdana, sans-serif"><span style="font-weight: normal;"><br>
</span></font></font></font></p>


</div>
<hr style="width: 100%; height: 2px;">
<div style="text-align: right; margin-top: 0px; height: 91px;"><small><small><a href="http://www.symisc.net/"><img style="border: 0px solid ; width: 170px; height: 70px;" alt="Symisc Systems" src="../images/symisc.png"></a></small></small>
<div style="text-align: left; margin-top: 0px; height: 14px;"><small><small style="font-family: Verdana;">Copyright © <a href="http://www.symisc.net/">Symisc Systems</a></small></small><br>
</div>
</div>
</div>

</body></html>